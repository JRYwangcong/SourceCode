
#include "Global.h"
#include "drvDeltaE.h"
#include "msACE.h"
#include "NVRam.h"
#include "Adjust.h"
#include "msPQ.h"
#include "drv3DLUT.h"

#define DeltaEVersion   "1.0.0"

#define  ENABLE_DELTAE_DEBUG  1
#if (ENABLE_DELTAE_DEBUG&&ENABLE_MSTV_UART_DEBUG)
#define LUT_printData(str, value)   printData(str, value)
#define LUT_printMsg(str)               printMsg(str)
#else
#define LUT_printData(str, value)
#define LUT_printMsg(str)
#endif

short _L0HSt = 0;
short _L0HEd = 0;
short _R0HSt = 0;
short _R0HEd = 0;

//Actual entry of post gamma fomat is 1024, this is compressed format.

DWORD _addrOfAutoColorBlock = ADDR_DELTAE_BLOCK;//0x1000;
StoredFormatOfPostGamma _postGamma;

/****DeltaE calibratoion Tool Usage table Note****/
/* DeltaE Tool Version  x.xxxx 	*/     
/*
Y2R matrix    (Y2R default or Disable) 		        
       YUV domain 			   				SC0F_4C[5][4][2][0]-S/ C10_5E[5][4][2][0]-M  
       RGB domain 			   				SC0F_4C[5]-S/SC10_5E[5]-M  				
DLC           (Disable)    	           		SC1A_08[7][6]-M/S 	
RGB offset    (Disable)    	           		SC0F_A6[1]-M/SC0F_A7[1]-S 
Degamma       (Enable & Gma 2.2 )           SC25_02[0]-M/SC25_22[0]-S 
xvYcc table   (Enable & not default table)  SC25_02[1]-M/SC25_22[1]-S 
fixgamma      (Enable & Gma 0.454 )         SC25_02[2]-M/SC25_22[2]-S	
RGB Hue       (Disable)    		   			SC14_02[0]-M/SC14_03[0]-S
RGB Bri       (Disable)   	
 	MST9U 			           				SC1C_20[7][6]-M/S	 		
 	MST9U3          		   				SC14_02[5]-M/SC14_03[5]-S  	

RGB Sat       (Disable)   	
 	MST9U 			           				SC2B_C0[6][2]-M/S		
 	MST9U3           		   				SC14_02[4]-M/SC14_03[4]-S   		

PreRGBoffset  (Disable)    		   			SC0F_A6[0]-M/SC0F_A7[0]-S 
PreRGBGain    (Disable)   	           		SC25_02[5]-M/SC25_22[5]-S	
PostGamma     (Enable & not linear table)   SC10_A0[0]-M/SC0F_30[0]-S 
PostRGBoffset (Disable)    		   			SC25_02[5]-M/SC25_22[5]-S	
PostRGBGain   (Disable)    		   			SC25_02[4]-M/SC25_22[4]-S	
UFC           (Disable)                     SC14_E0[2][1][0] 
*/

code BYTE  tblGamma22[] =
{
 0x00, 0x00, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x00, 0x10, 0x10, 0x10, 0x10,
 0x10, 0x10, 0x10, 0x10, 0x0C,
 };

//post-gamma : 320 entry - 10 bit (compressed format)
code BYTE *DefaultPostGamma[][3] =
{
    //  22
    {
        tblGamma22,
        tblGamma22,
        tblGamma22,
    },
};

#if ENABLE_ColorMode_FUNCTION
code BYTE tblFixGamma22_N[] =
{
0x00, 0xCC, 0x00, 0x5C, 0xC4, 0x11,
0x1C, 0x66, 0x22, 0xA8, 0xE4, 0x22,
0x1C, 0x4E, 0x33, 0x7E, 0xAC, 0x33,
0xD8, 0x00, 0x43, 0x28, 0x4E, 0x44,
0x72, 0x94, 0x44, 0xB6, 0xD6, 0x44,
0xF6, 0x14, 0x54, 0x32, 0x50, 0x55,
0x6C, 0x88, 0x55, 0xA2, 0xBE, 0x55,
0xD8, 0xF0, 0x55, 0x0A, 0x22, 0x66,
0x3A, 0x52, 0x66, 0x68, 0x7E, 0x66,
0x96, 0xAC, 0x66, 0xC0, 0xD6, 0x66,
0xEA, 0x00, 0x76, 0x14, 0x28, 0x77,
0x3C, 0x50, 0x77, 0x62, 0x76, 0x77,
0x88, 0x9C, 0x77, 0xAE, 0xC0, 0x77,
0xD2, 0xE4, 0x77, 0xF4, 0x06, 0x87,
0x18, 0x28, 0x88, 0x3A, 0x4A, 0x88,
0x5A, 0x6A, 0x88, 0x7A, 0x8A, 0x88,
0x9A, 0xAA, 0x88, 0xBA, 0xCA, 0x88,
0xDA, 0xE8, 0x88, 0xF8, 0x06, 0x98,
0x16, 0x24, 0x99, 0x32, 0x40, 0x99,
0x50, 0x5E, 0x99, 0x6C, 0x7A, 0x99,
0x88, 0x96, 0x99, 0xA4, 0xB0, 0x99,
0xBE, 0xCC, 0x99, 0xDA, 0xE6, 0x99,
0xF4, 0x00, 0xA9, 0x0E, 0x1A, 0xAA,
0x28, 0x34, 0xAA, 0x40, 0x4E, 0xAA,
0x5A, 0x66, 0xAA, 0x72, 0x7E, 0xAA,
0x8C, 0x98, 0xAA, 0xA4, 0xB0, 0xAA,
0xBC, 0xC8, 0xAA, 0xD4, 0xDE, 0xAA,
0xEA, 0xF6, 0xAA, 0x02, 0x0E, 0xBB,
0x18, 0x24, 0xBB, 0x30, 0x3A, 0xBB,
0x46, 0x50, 0xBB, 0x5C, 0x68, 0xBB,
0x72, 0x7C, 0xBB, 0x88, 0x92, 0xBB,
0x9E, 0xA8, 0xBB, 0xB2, 0xBE, 0xBB,
0xC8, 0xD2, 0xBB, 0xDE, 0xE8, 0xBB,
0xF2, 0xFC, 0xBB, 0x06, 0x10, 0xCC,
0x1C, 0x26, 0xCC, 0x30, 0x3A, 0xCC,
0x44, 0x4E, 0xCC, 0x58, 0x62, 0xCC,
0x6C, 0x74, 0xCC, 0x7E, 0x88, 0xCC,
0x92, 0x9C, 0xCC, 0xA6, 0xB0, 0xCC,
0xB8, 0xC2, 0xCC, 0xCC, 0xD6, 0xCC,
0xDE, 0xE8, 0xCC, 0xF2, 0xFA, 0xCC,
0x04, 0x0E, 0xDD, 0x16, 0x20, 0xDD,
0x28, 0x32, 0xDD, 0x3A, 0x44, 0xDD,
0x4E, 0x56, 0xDD, 0x5E, 0x68, 0xDD,
0x70, 0x7A, 0xDD, 0x82, 0x8C, 0xDD,
0x94, 0x9C, 0xDD, 0xA6, 0xAE, 0xDD,
0xB6, 0xC0, 0xDD, 0xC8, 0xD0, 0xDD,
0xDA, 0xE2, 0xDD, 0xEA, 0xF2, 0xDD,
0xFC, 0x04, 0xED, 0x0C, 0x14, 0xEE,
0x1C, 0x26, 0xEE, 0x2E, 0x36, 0xEE,
0x3E, 0x46, 0xEE, 0x4E, 0x56, 0xEE,
0x5E, 0x66, 0xEE, 0x6E, 0x76, 0xEE,
0x7E, 0x86, 0xEE, 0x8E, 0x96, 0xEE,
0x9E, 0xA6, 0xEE, 0xAE, 0xB6, 0xEE,
0xBE, 0xC6, 0xEE, 0xCE, 0xD6, 0xEE,
0xDE, 0xE6, 0xEE, 0xEE, 0xF6, 0xEE,
0xFC, 0x04, 0xFE, 0x0C, 0x14, 0xFF,
0x1C, 0x22, 0xFF, 0x2A, 0x32, 0xFF,
0x3A, 0x42, 0xFF, 0x48, 0x50, 0xFF,
0x58, 0x60, 0xFF, 0x66, 0x6E, 0xFF,
0x76, 0x7C, 0xFF, 0x84, 0x8C, 0xFF,
0x92, 0x9A, 0xFF, 0xA2, 0xA8, 0xFF,
0xB0, 0xB8, 0xFF, 0xBE, 0xC6, 0xFF,
0xCC, 0xD4, 0xFF, 0xDC, 0xE2, 0xFF,
0xEA, 0xF0, 0xFF, 0xF8, 0xFE, 0xFF,
};

code BYTE tblFixGamma24_N[] =
{
0x00, 0x94, 0x10, 0x1C, 0x80, 0x22,
0xD2, 0x18, 0x32, 0x56, 0x90, 0x33,
0xC4, 0xF4, 0x33, 0x22, 0x4C, 0x44,
0x74, 0x9C, 0x44, 0xC0, 0xE4, 0x44,
0x06, 0x28, 0x55, 0x46, 0x66, 0x55,
0x84, 0xA0, 0x55, 0xBC, 0xD8, 0x55,
0xF4, 0x0E, 0x65, 0x26, 0x40, 0x66,
0x58, 0x70, 0x66, 0x88, 0x9E, 0x66,
0xB6, 0xCC, 0x66, 0xE2, 0xF6, 0x66,
0x0C, 0x20, 0x77, 0x34, 0x48, 0x77,
0x5C, 0x70, 0x77, 0x84, 0x96, 0x77,
0xA8, 0xBC, 0x77, 0xCE, 0xE0, 0x77,
0xF2, 0x02, 0x87, 0x14, 0x26, 0x88,
0x36, 0x48, 0x88, 0x58, 0x68, 0x88,
0x78, 0x88, 0x88, 0x98, 0xA8, 0x88,
0xB8, 0xC8, 0x88, 0xD6, 0xE6, 0x88,
0xF4, 0x04, 0x98, 0x12, 0x20, 0x99,
0x30, 0x3E, 0x99, 0x4C, 0x5A, 0x99,
0x68, 0x76, 0x99, 0x84, 0x92, 0x99,
0x9E, 0xAC, 0x99, 0xBA, 0xC6, 0x99,
0xD4, 0xE2, 0x99, 0xEE, 0xFA, 0x99,
0x08, 0x14, 0xAA, 0x20, 0x2E, 0xAA,
0x3A, 0x46, 0xAA, 0x52, 0x5E, 0xAA,
0x6A, 0x76, 0xAA, 0x82, 0x8E, 0xAA,
0x9A, 0xA6, 0xAA, 0xB2, 0xBE, 0xAA,
0xCA, 0xD4, 0xAA, 0xE0, 0xEC, 0xAA,
0xF6, 0x02, 0xBA, 0x0E, 0x18, 0xBB,
0x24, 0x2E, 0xBB, 0x3A, 0x44, 0xBB,
0x4E, 0x5A, 0xBB, 0x64, 0x6E, 0xBB,
0x7A, 0x84, 0xBB, 0x8E, 0x98, 0xBB,
0xA4, 0xAE, 0xBB, 0xB8, 0xC2, 0xBB,
0xCC, 0xD6, 0xBB, 0xE0, 0xEA, 0xBB,
0xF4, 0xFE, 0xBB, 0x08, 0x12, 0xCC,
0x1C, 0x26, 0xCC, 0x30, 0x3A, 0xCC,
0x42, 0x4C, 0xCC, 0x56, 0x60, 0xCC,
0x68, 0x72, 0xCC, 0x7C, 0x86, 0xCC,
0x8E, 0x98, 0xCC, 0xA2, 0xAA, 0xCC,
0xB4, 0xBC, 0xCC, 0xC6, 0xCE, 0xCC,
0xD8, 0xE0, 0xCC, 0xEA, 0xF2, 0xCC,
0xFC, 0x04, 0xDC, 0x0E, 0x16, 0xDD,
0x1E, 0x28, 0xDD, 0x30, 0x38, 0xDD,
0x42, 0x4A, 0xDD, 0x52, 0x5C, 0xDD,
0x64, 0x6C, 0xDD, 0x74, 0x7E, 0xDD,
0x86, 0x8E, 0xDD, 0x96, 0x9E, 0xDD,
0xA6, 0xB0, 0xDD, 0xB8, 0xC0, 0xDD,
0xC8, 0xD0, 0xDD, 0xD8, 0xE0, 0xDD,
0xE8, 0xF0, 0xDD, 0xF8, 0x00, 0xED,
0x08, 0x10, 0xEE, 0x18, 0x20, 0xEE,
0x28, 0x30, 0xEE, 0x38, 0x40, 0xEE,
0x48, 0x50, 0xEE, 0x56, 0x5E, 0xEE,
0x66, 0x6E, 0xEE, 0x76, 0x7E, 0xEE,
0x84, 0x8C, 0xEE, 0x94, 0x9C, 0xEE,
0xA2, 0xAA, 0xEE, 0xB2, 0xBA, 0xEE,
0xC0, 0xC8, 0xEE, 0xD0, 0xD6, 0xEE,
0xDE, 0xE6, 0xEE, 0xEC, 0xF4, 0xEE,
0xFC, 0x02, 0xFE, 0x0A, 0x12, 0xFF,
0x18, 0x20, 0xFF, 0x26, 0x2E, 0xFF,
0x36, 0x3C, 0xFF, 0x44, 0x4A, 0xFF,
0x52, 0x58, 0xFF, 0x60, 0x66, 0xFF,
0x6E, 0x74, 0xFF, 0x7C, 0x82, 0xFF,
0x8A, 0x90, 0xFF, 0x98, 0x9E, 0xFF,
0xA4, 0xAC, 0xFF, 0xB2, 0xBA, 0xFF,
0xC0, 0xC6, 0xFF, 0xCE, 0xD4, 0xFF,
0xDA, 0xE2, 0xFF, 0xE8, 0xF0, 0xFF,
};

code BYTE tblFixGamma26_N[] =
{
0x00, 0xE4, 0x10, 0x78, 0xE2, 0x22,
0x39, 0x83, 0x33, 0xC4, 0xFF, 0x33,
0x35, 0x67, 0x44, 0x96, 0xC1, 0x44,
0xEB, 0x12, 0x54, 0x38, 0x5C, 0x55,
0x7E, 0x9F, 0x55, 0xBF, 0xDE, 0x55,
0xFC, 0x19, 0x65, 0x36, 0x51, 0x66,
0x6C, 0x86, 0x66, 0x9F, 0xB8, 0x66,
0xD0, 0xE8, 0x66, 0xFF, 0x16, 0x76,
0x2C, 0x42, 0x77, 0x57, 0x6C, 0x77,
0x81, 0x95, 0x77, 0xA9, 0xBD, 0x77,
0xD1, 0xE4, 0x77, 0xF6, 0x09, 0x87,
0x1B, 0x2D, 0x88, 0x3F, 0x51, 0x88,
0x62, 0x73, 0x88, 0x84, 0x95, 0x88,
0xA5, 0xB5, 0x88, 0xC5, 0xD5, 0x88,
0xE5, 0xF5, 0x88, 0x04, 0x13, 0x99,
0x22, 0x31, 0x99, 0x40, 0x4F, 0x99,
0x5D, 0x6B, 0x99, 0x7A, 0x88, 0x99,
0x96, 0xA3, 0x99, 0xB1, 0xBF, 0x99,
0xCC, 0xD9, 0x99, 0xE7, 0xF4, 0x99,
0x01, 0x0E, 0xAA, 0x1B, 0x27, 0xAA,
0x34, 0x40, 0xAA, 0x4D, 0x59, 0xAA,
0x65, 0x71, 0xAA, 0x7E, 0x8A, 0xAA,
0x95, 0xA1, 0xAA, 0xAD, 0xB9, 0xAA,
0xC4, 0xD0, 0xAA, 0xDB, 0xE6, 0xAA,
0xF2, 0xFD, 0xAA, 0x08, 0x13, 0xBB,
0x1E, 0x29, 0xBB, 0x34, 0x3F, 0xBB,
0x49, 0x54, 0xBB, 0x5E, 0x69, 0xBB,
0x73, 0x7E, 0xBB, 0x88, 0x93, 0xBB,
0x9D, 0xA7, 0xBB, 0xB1, 0xBB, 0xBB,
0xC5, 0xCF, 0xBB, 0xD9, 0xE3, 0xBB,
0xED, 0xF6, 0xBB, 0x00, 0x0A, 0xCC,
0x13, 0x1D, 0xCC, 0x27, 0x30, 0xCC,
0x39, 0x43, 0xCC, 0x4C, 0x55, 0xCC,
0x5F, 0x68, 0xCC, 0x71, 0x7A, 0xCC,
0x83, 0x8C, 0xCC, 0x95, 0x9E, 0xCC,
0xA7, 0xB0, 0xCC, 0xB9, 0xC2, 0xCC,
0xCA, 0xD3, 0xCC, 0xDC, 0xE5, 0xCC,
0xED, 0xF6, 0xCC, 0xFE, 0x07, 0xDC,
0x0F, 0x18, 0xDD, 0x20, 0x29, 0xDD,
0x31, 0x39, 0xDD, 0x41, 0x4A, 0xDD,
0x52, 0x5A, 0xDD, 0x62, 0x6A, 0xDD,
0x72, 0x7B, 0xDD, 0x83, 0x8B, 0xDD,
0x93, 0x9A, 0xDD, 0xA2, 0xAA, 0xDD,
0xB2, 0xBA, 0xDD, 0xC2, 0xCA, 0xDD,
0xD1, 0xD9, 0xDD, 0xE1, 0xE8, 0xDD,
0xF0, 0xF8, 0xDD, 0xFF, 0x07, 0xED,
0x0E, 0x16, 0xEE, 0x1D, 0x25, 0xEE,
0x2C, 0x34, 0xEE, 0x3B, 0x42, 0xEE,
0x4A, 0x51, 0xEE, 0x58, 0x60, 0xEE,
0x67, 0x6E, 0xEE, 0x75, 0x7C, 0xEE,
0x84, 0x8B, 0xEE, 0x92, 0x99, 0xEE,
0xA0, 0xA7, 0xEE, 0xAE, 0xB5, 0xEE,
0xBC, 0xC3, 0xEE, 0xCA, 0xD1, 0xEE,
0xD8, 0xDF, 0xEE, 0xE6, 0xEC, 0xEE,
0xF3, 0xFA, 0xEE, 0x01, 0x08, 0xFF,
0x0E, 0x15, 0xFF, 0x1C, 0x22, 0xFF,
0x29, 0x30, 0xFF, 0x36, 0x3D, 0xFF,
0x44, 0x4A, 0xFF, 0x51, 0x57, 0xFF,
0x5E, 0x64, 0xFF, 0x6B, 0x71, 0xFF,
0x78, 0x7E, 0xFF, 0x85, 0x8B, 0xFF,
0x91, 0x98, 0xFF, 0x9E, 0xA5, 0xFF,
0xAB, 0xB1, 0xFF, 0xB8, 0xBE, 0xFF,
0xC4, 0xCA, 0xFF, 0xD1, 0xD7, 0xFF,
0xDD, 0xE3, 0xFF, 0xE9, 0xF0, 0xFF,
};



#if (CHIP_ID==MST9U3)
//for sRGB de-gamma table
code BYTE tblDeGamma22_C[] =
{
0x00, 0x01, 0x00, 0x02, 0x04, 0x00,
0x05, 0x06, 0x00, 0x07, 0x09, 0x00,
0x0A, 0x0B, 0x00, 0x0C, 0x0E, 0x00,
0x0F, 0x10, 0x00, 0x12, 0x14, 0x00,
0x15, 0x17, 0x00, 0x19, 0x1B, 0x00,
0x1D, 0x1F, 0x00, 0x21, 0x23, 0x00,
0x25, 0x28, 0x00, 0x2A, 0x2D, 0x00,
0x30, 0x32, 0x00, 0x35, 0x38, 0x00,
0x3B, 0x3E, 0x00, 0x42, 0x45, 0x00,
0x48, 0x4C, 0x00, 0x4F, 0x53, 0x00,
0x57, 0x5B, 0x00, 0x5F, 0x63, 0x00,
0x67, 0x6B, 0x00, 0x70, 0x74, 0x00,
0x79, 0x7E, 0x00, 0x83, 0x88, 0x00,
0x8D, 0x92, 0x00, 0x97, 0x9C, 0x00,
0xA2, 0xA8, 0x00, 0xAD, 0xB3, 0x00,
0xB9, 0xBF, 0x00, 0xC5, 0xCC, 0x00,
0xD2, 0xD8, 0x00, 0xDF, 0xE6, 0x00,
0xED, 0xF4, 0x00, 0xFB, 0x02, 0x10,
0x09, 0x11, 0x11, 0x18, 0x20, 0x11,
0x28, 0x30, 0x11, 0x38, 0x40, 0x11,
0x49, 0x51, 0x11, 0x5A, 0x62, 0x11,
0x6B, 0x74, 0x11, 0x7D, 0x86, 0x11,
0x90, 0x99, 0x11, 0xA3, 0xAC, 0x11,
0xB6, 0xC0, 0x11, 0xCA, 0xD5, 0x11,
0xDF, 0xEA, 0x11, 0xF4, 0xFF, 0x11,
0x0A, 0x15, 0x22, 0x20, 0x2B, 0x22,
0x37, 0x42, 0x22, 0x4E, 0x5A, 0x22,
0x66, 0x72, 0x22, 0x7F, 0x8B, 0x22,
0x98, 0xA4, 0x22, 0xB1, 0xBE, 0x22,
0xCB, 0xD8, 0x22, 0xE6, 0xF3, 0x22,
0x01, 0x0F, 0x33, 0x1D, 0x2B, 0x33,
0x39, 0x48, 0x33, 0x56, 0x65, 0x33,
0x74, 0x83, 0x33, 0x92, 0xA1, 0x33,
0xB1, 0xC0, 0x33, 0xD0, 0xE0, 0x33,
0xF0, 0x00, 0x43, 0x11, 0x21, 0x44,
0x32, 0x43, 0x44, 0x54, 0x65, 0x44,
0x76, 0x87, 0x44, 0x99, 0xAB, 0x44,
0xBD, 0xCF, 0x44, 0xE1, 0xF3, 0x44,
0x06, 0x18, 0x55, 0x2B, 0x3E, 0x55,
0x51, 0x65, 0x55, 0x78, 0x8C, 0x55,
0xA0, 0xB3, 0x55, 0xC8, 0xDC, 0x55,
0xF0, 0x05, 0x65, 0x1A, 0x2E, 0x66,
0x43, 0x59, 0x66, 0x6E, 0x84, 0x66,
0x99, 0xAF, 0x66, 0xC5, 0xDB, 0x66,
0xF2, 0x08, 0x76, 0x1F, 0x36, 0x77,
0x4D, 0x64, 0x77, 0x7C, 0x93, 0x77,
0xAB, 0xC3, 0x77, 0xDB, 0xF3, 0x77,
0x0B, 0x24, 0x88, 0x3D, 0x55, 0x88,
0x6F, 0x88, 0x88, 0xA1, 0xBB, 0x88,
0xD4, 0xEE, 0x88, 0x08, 0x23, 0x99,
0x3D, 0x58, 0x99, 0x73, 0x8E, 0x99,
0xA9, 0xC4, 0x99, 0xDF, 0xFB, 0x99,
0x17, 0x33, 0xAA, 0x4F, 0x6C, 0xAA,
0x88, 0xA5, 0xAA, 0xC2, 0xDF, 0xAA,
0xFC, 0x19, 0xBA, 0x37, 0x55, 0xBB,
0x73, 0x91, 0xBB, 0xAF, 0xCE, 0xBB,
0xEC, 0x0B, 0xCB, 0x2A, 0x4A, 0xCC,
0x69, 0x89, 0xCC, 0xA8, 0xC8, 0xCC,
0xE8, 0x09, 0xDC, 0x29, 0x4A, 0xDD,
0x6B, 0x8C, 0xDD, 0xAD, 0xCF, 0xDD,
0xF0, 0x12, 0xED, 0x34, 0x56, 0xEE,
0x79, 0x9B, 0xEE, 0xBE, 0xE1, 0xEE,
0x04, 0x27, 0xFF, 0x4B, 0x6E, 0xFF,
0x92, 0xB6, 0xFF, 0xDB, 0xFF, 0xFF,
};

code BYTE tblDeGamma24_C[] =
{
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x01, 0x01, 0x00,
0x01, 0x01, 0x00, 0x02, 0x02, 0x00,
0x03, 0x03, 0x00, 0x04, 0x05, 0x00,
0x05, 0x06, 0x00, 0x07, 0x09, 0x00,
0x0A, 0x0B, 0x00, 0x0D, 0x0E, 0x00,
0x0F, 0x10, 0x00, 0x11, 0x13, 0x00,
0x14, 0x16, 0x00, 0x18, 0x1A, 0x00,
0x1C, 0x1E, 0x00, 0x20, 0x23, 0x00,
0x25, 0x28, 0x00, 0x2A, 0x2D, 0x00,
0x30, 0x33, 0x00, 0x36, 0x39, 0x00,
0x3C, 0x3F, 0x00, 0x43, 0x46, 0x00,
0x4A, 0x4E, 0x00, 0x52, 0x56, 0x00,
0x5A, 0x5E, 0x00, 0x62, 0x67, 0x00,
0x6B, 0x70, 0x00, 0x75, 0x7A, 0x00,
0x7F, 0x84, 0x00, 0x89, 0x8E, 0x00,
0x94, 0x99, 0x00, 0x9F, 0xA5, 0x00,
0xAB, 0xB1, 0x00, 0xB7, 0xBE, 0x00,
0xC4, 0xCB, 0x00, 0xD1, 0xD8, 0x00,
0xDF, 0xE6, 0x00, 0xEE, 0xF5, 0x00,
0xFD, 0x04, 0x10, 0x0C, 0x14, 0x11,
0x1C, 0x24, 0x11, 0x2C, 0x35, 0x11,
0x3D, 0x46, 0x11, 0x4F, 0x58, 0x11,
0x61, 0x6B, 0x11, 0x74, 0x7E, 0x11,
0x87, 0x91, 0x11, 0x9B, 0xA5, 0x11,
0xAF, 0xBA, 0x11, 0xC4, 0xCF, 0x11,
0xDA, 0xE5, 0x11, 0xF0, 0xFC, 0x11,
0x07, 0x13, 0x22, 0x1E, 0x2A, 0x22,
0x36, 0x43, 0x22, 0x4F, 0x5B, 0x22,
0x68, 0x75, 0x22, 0x82, 0x8F, 0x22,
0x9C, 0xAA, 0x22, 0xB7, 0xC5, 0x22,
0xD3, 0xE1, 0x22, 0xEF, 0xFE, 0x22,
0x0C, 0x1B, 0x33, 0x2A, 0x39, 0x33,
0x48, 0x57, 0x33, 0x67, 0x77, 0x33,
0x87, 0x97, 0x33, 0xA7, 0xB7, 0x33,
0xC8, 0xD8, 0x33, 0xE9, 0xFA, 0x33,
0x0B, 0x1D, 0x44, 0x2E, 0x40, 0x44,
0x52, 0x64, 0x44, 0x76, 0x88, 0x44,
0x9B, 0xAD, 0x44, 0xC0, 0xD3, 0x44,
0xE6, 0xFA, 0x44, 0x0D, 0x21, 0x55,
0x35, 0x49, 0x55, 0x5D, 0x72, 0x55,
0x86, 0x9B, 0x55, 0xB0, 0xC5, 0x55,
0xDB, 0xF0, 0x55, 0x06, 0x1C, 0x66,
0x32, 0x48, 0x66, 0x5E, 0x75, 0x66,
0x8C, 0xA3, 0x66, 0xBA, 0xD1, 0x66,
0xE9, 0x00, 0x76, 0x18, 0x30, 0x77,
0x48, 0x61, 0x77, 0x79, 0x92, 0x77,
0xAB, 0xC4, 0x77, 0xDE, 0xF7, 0x77,
0x11, 0x2B, 0x88, 0x45, 0x5F, 0x88,
0x7A, 0x94, 0x88, 0xAF, 0xCA, 0x88,
0xE5, 0x01, 0x98, 0x1C, 0x38, 0x99,
0x54, 0x70, 0x99, 0x8D, 0xA9, 0x99,
0xC6, 0xE3, 0x99, 0x00, 0x1E, 0xAA,
0x3B, 0x59, 0xAA, 0x77, 0x95, 0xAA,
0xB3, 0xD2, 0xAA, 0xF1, 0x10, 0xBA,
0x2F, 0x4E, 0xBB, 0x6E, 0x8D, 0xBB,
0xAD, 0xCD, 0xBB, 0xEE, 0x0E, 0xCB,
0x2F, 0x50, 0xCC, 0x71, 0x92, 0xCC,
0xB4, 0xD6, 0xCC, 0xF8, 0x1A, 0xDC,
0x3C, 0x5F, 0xDD, 0x81, 0xA4, 0xDD,
0xC8, 0xEB, 0xDD, 0x0E, 0x32, 0xEE,
0x56, 0x7A, 0xEE, 0x9F, 0xC4, 0xEE,
0xE8, 0x0D, 0xFE, 0x33, 0x58, 0xFF,
0x7E, 0xA4, 0xFF, 0xCA, 0xF0, 0xFF,
};

code BYTE tblDeGamma26_C[] =
{
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
0x01, 0x01, 0x00, 0x02, 0x02, 0x00,
0x03, 0x03, 0x00, 0x04, 0x04, 0x00,
0x05, 0x06, 0x00, 0x06, 0x07, 0x00,
0x08, 0x09, 0x00, 0x0A, 0x0B, 0x00,
0x0D, 0x0E, 0x00, 0x0F, 0x11, 0x00,
0x12, 0x14, 0x00, 0x15, 0x17, 0x00,
0x19, 0x1A, 0x00, 0x1C, 0x1E, 0x00,
0x21, 0x23, 0x00, 0x25, 0x27, 0x00,
0x2A, 0x2C, 0x00, 0x2F, 0x32, 0x00,
0x35, 0x37, 0x00, 0x3B, 0x3E, 0x00,
0x41, 0x44, 0x00, 0x48, 0x4B, 0x00,
0x4F, 0x52, 0x00, 0x56, 0x5A, 0x00,
0x5E, 0x62, 0x00, 0x67, 0x6B, 0x00,
0x70, 0x74, 0x00, 0x79, 0x7E, 0x00,
0x83, 0x88, 0x00, 0x8D, 0x92, 0x00,
0x98, 0x9D, 0x00, 0xA3, 0xA9, 0x00,
0xAF, 0xB5, 0x00, 0xBB, 0xC1, 0x00,
0xC8, 0xCE, 0x00, 0xD5, 0xDC, 0x00,
0xE3, 0xEA, 0x00, 0xF1, 0xF9, 0x00,
0x00, 0x08, 0x11, 0x10, 0x18, 0x11,
0x20, 0x28, 0x11, 0x30, 0x39, 0x11,
0x41, 0x4A, 0x11, 0x53, 0x5C, 0x11,
0x65, 0x6F, 0x11, 0x78, 0x82, 0x11,
0x8C, 0x96, 0x11, 0xA0, 0xAA, 0x11,
0xB5, 0xBF, 0x11, 0xCA, 0xD5, 0x11,
0xE0, 0xEB, 0x11, 0xF7, 0x02, 0x21,
0x0E, 0x1A, 0x22, 0x26, 0x32, 0x22,
0x3E, 0x4B, 0x22, 0x58, 0x64, 0x22,
0x71, 0x7F, 0x22, 0x8C, 0x9A, 0x22,
0xA7, 0xB5, 0x22, 0xC3, 0xD2, 0x22,
0xE0, 0xEF, 0x22, 0xFD, 0x0C, 0x32,
0x1B, 0x2B, 0x33, 0x3A, 0x4A, 0x33,
0x5A, 0x6A, 0x33, 0x7A, 0x8A, 0x33,
0x9B, 0xAC, 0x33, 0xBD, 0xCE, 0x33,
0xDF, 0xF1, 0x33, 0x02, 0x14, 0x44,
0x26, 0x39, 0x44, 0x4B, 0x5E, 0x44,
0x71, 0x84, 0x44, 0x97, 0xAA, 0x44,
0xBE, 0xD2, 0x44, 0xE6, 0xFA, 0x44,
0x0E, 0x23, 0x55, 0x38, 0x4D, 0x55,
0x62, 0x78, 0x55, 0x8D, 0xA3, 0x55,
0xB9, 0xCF, 0x55, 0xE6, 0xFD, 0x55,
0x13, 0x2B, 0x66, 0x42, 0x59, 0x66,
0x71, 0x89, 0x66, 0xA1, 0xB9, 0x66,
0xD2, 0xEB, 0x66, 0x04, 0x1D, 0x77,
0x36, 0x50, 0x77, 0x6A, 0x84, 0x77,
0x9E, 0xB9, 0x77, 0xD4, 0xEF, 0x77,
0x0A, 0x25, 0x88, 0x41, 0x5D, 0x88,
0x79, 0x95, 0x88, 0xB2, 0xCE, 0x88,
0xEB, 0x09, 0x98, 0x26, 0x44, 0x99,
0x62, 0x80, 0x99, 0x9E, 0xBD, 0x99,
0xDC, 0xFB, 0x99, 0x1A, 0x3A, 0xAA,
0x59, 0x79, 0xAA, 0x9A, 0xBA, 0xAA,
0xDB, 0xFC, 0xAA, 0x1D, 0x3F, 0xBB,
0x60, 0x82, 0xBB, 0xA4, 0xC7, 0xBB,
0xE9, 0x0C, 0xCB, 0x2F, 0x53, 0xCC,
0x76, 0x9A, 0xCC, 0xBE, 0xE3, 0xCC,
0x08, 0x2C, 0xDD, 0x52, 0x77, 0xDD,
0x9D, 0xC2, 0xDD, 0xE9, 0x0F, 0xED,
0x36, 0x5C, 0xEE, 0x84, 0xAB, 0xEE,
0xD3, 0xFB, 0xEE, 0x23, 0x4B, 0xFF,
0x74, 0x9D, 0xFF, 0xC6, 0xF0, 0xFF,
};

#else

code BYTE SegGainOfDeGamma22[] = {0xE4, 0xE4, 0xE4};
code WORD SegPointOfDeGamma22[] = {0x00E6, 0x03FF, 0x03FF, 0x00E6, 0x03FF, 0x03FF, 0x00E6, 0x03FF, 0x03FF};
code BYTE tblDeGamma22[] =
{
0x00, 0x21, 0x00,
0x00, 0x41, 0x08,
0x00, 0x21, 0x14,
0x00, 0x41, 0x1C,
0x00, 0x21, 0x28,
0x00, 0x41, 0x30,
0x00, 0x22, 0x3C,
0x00, 0x22, 0x48,
0x00, 0x42, 0x54,
0x00, 0x42, 0x64,
0x00, 0x42, 0x74,
0x00, 0x42, 0x84,
0x00, 0x62, 0x94,
0x00, 0x62, 0xA8,
0x00, 0x63, 0xBC,
0x00, 0x63, 0xD4,
0x00, 0x63, 0xEC,
0x01, 0x64, 0x04,
0x01, 0x64, 0x20,
0x01, 0x83, 0x3C,
0x01, 0x84, 0x58,
0x01, 0x85, 0x78,
0x01, 0x84, 0x9C,
0x01, 0xA4, 0xBC,
0x01, 0xA5, 0xE0,
0x02, 0xA5, 0x08,
0x02, 0xA5, 0x30,
0x02, 0xC5, 0x58,
0x02, 0xC5, 0x84,
0x02, 0xC6, 0xB0,
0x02, 0xC6, 0xE0,
0x03, 0xC7, 0x10,
0x03, 0xC7, 0x44,
0x03, 0xE6, 0x78,
0x03, 0xE7, 0xAC,
0x03, 0x07, 0xE5,
0x04, 0xE8, 0x20,
0x04, 0xE8, 0x5C,
0x04, 0x08, 0x99,
0x04, 0x09, 0xD9,
0x05, 0x08, 0x1D,
0x05, 0x29, 0x5D,
0x05, 0x29, 0xA5,
0x05, 0x29, 0xED,
0x06, 0x49, 0x35,
0x06, 0x4A, 0x81,
0x06, 0x4A, 0xD1,
0x07, 0x4A, 0x21,
0x07, 0x6A, 0x71,
0x07, 0x6B, 0xC5,
0x08, 0x6B, 0x1D,
0x08, 0x6B, 0x75,
0x08, 0x8C, 0xCD,
0x09, 0x6C, 0x2D,
0x09, 0x8D, 0x89,
0x09, 0x8C, 0xED,
0x0A, 0xAD, 0x4D,
0x0A, 0xAD, 0xB5,
0x0B, 0xAD, 0x1D,
0x0B, 0xCD, 0x85,
0x0B, 0xCE, 0xF1,
0x0C, 0xCE, 0x61,
0x0C, 0xCF, 0xD1,
0x0D, 0xEE, 0x45,
0x0D, 0xEF, 0xB9,
0x0E, 0x0F, 0x32,
0x0E, 0xF0, 0xAD,
0x0F, 0x10, 0x2A,
0x0F, 0x10, 0xAA,
0x10, 0x30, 0x2A,
0x10, 0x31, 0xAE,
0x11, 0x31, 0x36,
0x11, 0x32, 0xBE,
0x12, 0x32, 0x4A,
0x12, 0x52, 0xD6,
0x13, 0x53, 0x66,
0x13, 0x53, 0xFA,
0x14, 0x73, 0x8E,
0x15, 0x73, 0x26,
0x15, 0x93, 0xBE,
0x16, 0x94, 0x5A,
0x16, 0x94, 0xFA,
0x17, 0xB4, 0x9A,
0x18, 0xB5, 0x3E,
0x18, 0xB5, 0xE6,
0x19, 0xD5, 0x8E,
0x1A, 0xD6, 0x3A,
0x1A, 0xD6, 0xEA,
0x1B, 0xF6, 0x9A,
0x1C, 0xF7, 0x4E,
0x1D, 0xF7, 0x06,
0x1D, 0xF8, 0xBE,
0x1E, 0x18, 0x7B,
0x1F, 0x18, 0x3B,
0x1F, 0x19, 0xFB,
0x20, 0x38, 0xBF,
0x21, 0x3A, 0x83,
0x22, 0x3A, 0x4F,
0x23, 0x3A, 0x1B,
0x23, 0x5B, 0xE7,
0x24, 0x5B, 0xBB,
0x25, 0x5B, 0x8F,
0x26, 0x9B, 0x63,
0x27, 0x7C, 0x3F,
0x28, 0x9C, 0x1B,
0x28, 0x9C, 0xFB,
0x29, 0xBD, 0xDB,
0x2A, 0x9D, 0xC3,
0x2B, 0xDD, 0xA7,
0x2C, 0xDD, 0x93,
0x2D, 0xDE, 0x7F,
0x2E, 0xFE, 0x6F,
0x2F, 0xFF, 0x63,
0x30, 0xFF, 0x5B,
0x31, 0xFF, 0x53,
0x32, 0x00, 0x4C,
0x33, 0x00, 0x4C,
0x34, 0x01, 0x4C,
0x35, 0x21, 0x50,
0x36, 0x22, 0x58,
0x37, 0x22, 0x64,
0x38, 0x42, 0x70,
0x39, 0x43, 0x80,
0x3A, 0x43, 0x94,
0x3B, 0x64, 0xA8,
0x3C, 0x64, 0xC4,
0x3D, 0x84, 0xE0,
0x3F, 0x80, 0x00,
};

code BYTE SegGainOfDeGamma24[] = {0xE4, 0xE4, 0xE4};
code WORD SegPointOfDeGamma24[] = {0x00DE, 0x03FF, 0x03FF, 0x00DE, 0x03FF, 0x03FF, 0x00DE, 0x03FF, 0x03FF};
code BYTE tblDeGamma24[] =
{
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x01, 0x00,
0x00, 0x00, 0x04,
0x00, 0x01, 0x04,
0x00, 0x01, 0x08,
0x00, 0x01, 0x0C,
0x00, 0x20, 0x10,
0x00, 0x21, 0x14,
0x00, 0x41, 0x1C,
0x00, 0x22, 0x28,
0x00, 0x21, 0x34,
0x00, 0x21, 0x3C,
0x00, 0x41, 0x44,
0x00, 0x42, 0x50,
0x00, 0x42, 0x60,
0x00, 0x42, 0x70,
0x00, 0x62, 0x80,
0x00, 0x62, 0x94,
0x00, 0x63, 0xA8,
0x00, 0x63, 0xC0,
0x00, 0x63, 0xD8,
0x00, 0x64, 0xF0,
0x01, 0x64, 0x0C,
0x01, 0x84, 0x28,
0x01, 0x84, 0x48,
0x01, 0x84, 0x68,
0x01, 0xA4, 0x88,
0x01, 0xA5, 0xAC,
0x01, 0xA5, 0xD4,
0x01, 0xA5, 0xFC,
0x02, 0xA6, 0x24,
0x02, 0xA6, 0x50,
0x02, 0xC6, 0x7C,
0x02, 0xC6, 0xAC,
0x02, 0xE6, 0xDC,
0x03, 0xE6, 0x10,
0x03, 0xE7, 0x44,
0x03, 0xE8, 0x7C,
0x03, 0xE8, 0xB8,
0x03, 0xE8, 0xF4,
0x04, 0x08, 0x31,
0x04, 0x08, 0x71,
0x04, 0x28, 0xB1,
0x04, 0x29, 0xF5,
0x05, 0x29, 0x3D,
0x05, 0x49, 0x85,
0x05, 0x49, 0xD1,
0x06, 0x4A, 0x1D,
0x06, 0x4A, 0x6D,
0x06, 0x6A, 0xBD,
0x07, 0x6B, 0x11,
0x07, 0x6B, 0x69,
0x07, 0x8B, 0xC1,
0x08, 0x8B, 0x1D,
0x08, 0x8C, 0x79,
0x08, 0xAC, 0xD9,
0x09, 0x8D, 0x3D,
0x09, 0xAD, 0xA1,
0x0A, 0xAD, 0x09,
0x0A, 0xCD, 0x71,
0x0A, 0xCE, 0xDD,
0x0B, 0xCE, 0x4D,
0x0B, 0xEE, 0xBD,
0x0C, 0xEF, 0x31,
0x0C, 0xEF, 0xA9,
0x0D, 0xF0, 0x21,
0x0D, 0x10, 0x9E,
0x0E, 0x10, 0x1E,
0x0E, 0x11, 0x9E,
0x0F, 0x11, 0x22,
0x0F, 0x31, 0xA6,
0x10, 0x51, 0x2E,
0x10, 0x52, 0xBA,
0x11, 0x52, 0x4A,
0x11, 0x53, 0xDA,
0x12, 0x53, 0x6E,
0x13, 0x73, 0x02,
0x13, 0x93, 0x9A,
0x14, 0x94, 0x36,
0x14, 0x94, 0xD6,
0x15, 0xB4, 0x76,
0x16, 0xB5, 0x1A,
0x16, 0xB6, 0xC2,
0x17, 0xB6, 0x6E,
0x18, 0xD6, 0x1A,
0x18, 0xD6, 0xCA,
0x19, 0xF7, 0x7A,
0x1A, 0xF7, 0x32,
0x1A, 0xF8, 0xEA,
0x1B, 0xF8, 0xA6,
0x1C, 0x18, 0x63,
0x1D, 0x38, 0x23,
0x1D, 0x39, 0xE7,
0x1E, 0x3A, 0xAF,
0x1F, 0x3A, 0x7B,
0x20, 0x5A, 0x47,
0x21, 0x5B, 0x17,
0x21, 0x5B, 0xEB,
0x22, 0x7B, 0xBF,
0x23, 0x9B, 0x97,
0x24, 0x9C, 0x73,
0x25, 0x9D, 0x53,
0x26, 0x9D, 0x37,
0x27, 0xBD, 0x1B,
0x28, 0xDD, 0x03,
0x28, 0xDE, 0xEF,
0x29, 0xDE, 0xDF,
0x2A, 0xFF, 0xCF,
0x2B, 0xFF, 0xC7,
0x2C, 0xFF, 0xBF,
0x2D, 0x00, 0xB8,
0x2E, 0x01, 0xB4,
0x2F, 0x01, 0xB8,
0x30, 0x21, 0xBC,
0x31, 0x22, 0xC4,
0x32, 0x42, 0xD0,
0x33, 0x42, 0xE0,
0x34, 0x62, 0xF0,
0x36, 0x64, 0x04,
0x37, 0x63, 0x20,
0x38, 0x84, 0x38,
0x39, 0x85, 0x58,
0x3A, 0xA4, 0x7C,
0x3B, 0xA6, 0xA0,
0x3C, 0xA6, 0xCC,
0x3D, 0xC6, 0xF8,
0x3F, 0xC0, 0x28,
};

code BYTE SegGainOfDeGamma26[] = {0xE4, 0xE4, 0xE4};
code WORD SegPointOfDeGamma26[] = {0x00DA, 0x03FF, 0x03FF, 0x00DA, 0x03FF, 0x03FF, 0x00DA, 0x03FF, 0x03FF};
code BYTE tblDeGamma26[] =
{
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x00, 0x00,
0x00, 0x00, 0x04,
0x00, 0x00, 0x08,
0x00, 0x00, 0x0C,
0x00, 0x00, 0x10,
0x00, 0x00, 0x14,
0x00, 0x00, 0x18,
0x00, 0x01, 0x20,
0x00, 0x21, 0x28,
0x00, 0x21, 0x34,
0x00, 0x21, 0x3C,
0x00, 0x21, 0x48,
0x00, 0x21, 0x54,
0x00, 0x21, 0x64,
0x00, 0x42, 0x70,
0x00, 0x42, 0x80,
0x00, 0x42, 0x94,
0x00, 0x42, 0xA8,
0x00, 0x42, 0xBC,
0x00, 0x43, 0xD0,
0x00, 0x63, 0xE8,
0x01, 0x63, 0x04,
0x01, 0x63, 0x1C,
0x01, 0x63, 0x38,
0x01, 0x64, 0x58,
0x01, 0x84, 0x78,
0x01, 0x84, 0x98,
0x01, 0x84, 0xBC,
0x01, 0x84, 0xE0,
0x02, 0xA5, 0x08,
0x02, 0xA5, 0x30,
0x02, 0xA5, 0x5C,
0x02, 0xA5, 0x88,
0x02, 0xC6, 0xB8,
0x02, 0xC6, 0xE8,
0x03, 0xC6, 0x1C,
0x03, 0xC6, 0x50,
0x03, 0xE7, 0x88,
0x03, 0xE7, 0xC0,
0x03, 0xE7, 0xFC,
0x04, 0xE8, 0x38,
0x04, 0x08, 0x79,
0x04, 0x08, 0xBD,
0x05, 0x08, 0x01,
0x05, 0x29, 0x45,
0x05, 0x29, 0x91,
0x05, 0x29, 0xD9,
0x06, 0x2A, 0x29,
0x06, 0x4A, 0x79,
0x06, 0x4A, 0xCD,
0x07, 0x4B, 0x21,
0x07, 0x6B, 0x79,
0x07, 0x6B, 0xD1,
0x08, 0x6B, 0x2D,
0x08, 0x8C, 0x8D,
0x08, 0x8C, 0xF1,
0x09, 0x8C, 0x55,
0x09, 0xAD, 0xBD,
0x0A, 0xAD, 0x25,
0x0A, 0xAE, 0x91,
0x0B, 0xCE, 0x01,
0x0B, 0xCE, 0x75,
0x0B, 0xCF, 0xE9,
0x0C, 0xEF, 0x61,
0x0C, 0xEF, 0xD9,
0x0D, 0xF0, 0x59,
0x0D, 0x10, 0xDA,
0x0E, 0x10, 0x5E,
0x0E, 0x31, 0xE2,
0x0F, 0x31, 0x6A,
0x0F, 0x31, 0xFA,
0x10, 0x52, 0x86,
0x11, 0x52, 0x1A,
0x11, 0x53, 0xAE,
0x12, 0x73, 0x46,
0x12, 0x73, 0xE2,
0x13, 0x94, 0x82,
0x14, 0x94, 0x22,
0x14, 0x95, 0xCA,
0x15, 0xB5, 0x72,
0x16, 0xB5, 0x1E,
0x16, 0xD6, 0xCA,
0x17, 0xD6, 0x7E,
0x18, 0xD7, 0x32,
0x18, 0xF7, 0xEA,
0x19, 0xF8, 0xA6,
0x1A, 0x18, 0x67,
0x1B, 0x18, 0x2B,
0x1B, 0x39, 0xEF,
0x1C, 0x39, 0xBB,
0x1D, 0x3A, 0x87,
0x1E, 0x5A, 0x57,
0x1F, 0x5B, 0x2B,
0x20, 0x7B, 0x03,
0x20, 0x7B, 0xDF,
0x21, 0x9C, 0xBF,
0x22, 0x9C, 0x9F,
0x23, 0xBD, 0x87,
0x24, 0xBD, 0x6F,
0x25, 0xDE, 0x5F,
0x26, 0xDE, 0x4F,
0x27, 0xDF, 0x43,
0x28, 0xFF, 0x3B,
0x29, 0xFF, 0x37,
0x2A, 0x00, 0x34,
0x2B, 0x01, 0x38,
0x2C, 0x21, 0x40,
0x2D, 0x22, 0x4C,
0x2E, 0x42, 0x58,
0x2F, 0x42, 0x6C,
0x30, 0x63, 0x84,
0x31, 0x63, 0xA0,
0x32, 0x84, 0xBC,
0x33, 0x84, 0xE0,
0x35, 0xA5, 0x08,
0x36, 0xA5, 0x30,
0x37, 0xC6, 0x60,
0x38, 0xC6, 0x90,
0x39, 0xE7, 0xC8,
0x3B, 0xE7, 0x04,
0x3C, 0x08, 0x45,
0x3D, 0x09, 0x85,
0x3E, 0x20, 0xCD,
};
#endif
#endif

#if ENABLE_GAMMA_FUNCTION
code BYTE tblFixGamma10_N[] =
{
 0x00, 0x10, 0x00, 0x20, 0x30, 0x00,
 0x40, 0x50, 0x00, 0x60, 0x70, 0x00,
 0x80, 0x90, 0x00, 0xa0, 0xb0, 0x00,
 0xc0, 0xd0, 0x00, 0xe0, 0xf0, 0x00,
 0x00, 0x10, 0x11, 0x20, 0x30, 0x11,
 0x40, 0x50, 0x11, 0x60, 0x70, 0x11,
 0x80, 0x90, 0x11, 0xa0, 0xb0, 0x11,
 0xc0, 0xd0, 0x11, 0xe0, 0xf0, 0x11,
 0x00, 0x10, 0x22, 0x20, 0x30, 0x22,
 0x40, 0x50, 0x22, 0x60, 0x70, 0x22,
 0x80, 0x90, 0x22, 0xa0, 0xb0, 0x22,
 0xc0, 0xd0, 0x22, 0xe0, 0xf0, 0x22,
 0x00, 0x10, 0x33, 0x20, 0x30, 0x33,
 0x40, 0x50, 0x33, 0x60, 0x70, 0x33,
 0x80, 0x90, 0x33, 0xa0, 0xb0, 0x33,
 0xc0, 0xd0, 0x33, 0xe0, 0xf0, 0x33,
 0x00, 0x10, 0x44, 0x20, 0x30, 0x44,
 0x40, 0x50, 0x44, 0x60, 0x70, 0x44,
 0x80, 0x90, 0x44, 0xa0, 0xb0, 0x44,
 0xc0, 0xd0, 0x44, 0xe0, 0xf0, 0x44,
 0x00, 0x10, 0x55, 0x20, 0x30, 0x55,
 0x40, 0x50, 0x55, 0x60, 0x70, 0x55,
 0x80, 0x90, 0x55, 0xa0, 0xb0, 0x55,
 0xc0, 0xd0, 0x55, 0xe0, 0xf0, 0x55,
 0x00, 0x10, 0x66, 0x20, 0x30, 0x66,
 0x40, 0x50, 0x66, 0x60, 0x70, 0x66,
 0x80, 0x90, 0x66, 0xa0, 0xb0, 0x66,
 0xc0, 0xd0, 0x66, 0xe0, 0xf0, 0x66,
 0x00, 0x10, 0x77, 0x20, 0x30, 0x77,
 0x40, 0x50, 0x77, 0x60, 0x70, 0x77,
 0x80, 0x90, 0x77, 0xa0, 0xb0, 0x77,
 0xc0, 0xd0, 0x77, 0xe0, 0xf0, 0x77,
 0x00, 0x10, 0x88, 0x20, 0x30, 0x88,
 0x40, 0x50, 0x88, 0x60, 0x70, 0x88,
 0x80, 0x90, 0x88, 0xa0, 0xb0, 0x88,
 0xc0, 0xd0, 0x88, 0xe0, 0xf0, 0x88,
 0x00, 0x10, 0x99, 0x20, 0x30, 0x99,
 0x40, 0x50, 0x99, 0x60, 0x70, 0x99,
 0x80, 0x90, 0x99, 0xa0, 0xb0, 0x99,
 0xc0, 0xd0, 0x99, 0xe0, 0xf0, 0x99,
 0x00, 0x10, 0xaa, 0x20, 0x30, 0xaa,
 0x40, 0x50, 0xaa, 0x60, 0x70, 0xaa,
 0x80, 0x90, 0xaa, 0xa0, 0xb0, 0xaa,
 0xc0, 0xd0, 0xaa, 0xe0, 0xf0, 0xaa,
 0x00, 0x10, 0xbb, 0x20, 0x30, 0xbb,
 0x40, 0x50, 0xbb, 0x60, 0x70, 0xbb,
 0x80, 0x90, 0xbb, 0xa0, 0xb0, 0xbb,
 0xc0, 0xd0, 0xbb, 0xe0, 0xf0, 0xbb,
 0x00, 0x10, 0xcc, 0x20, 0x30, 0xcc,
 0x40, 0x50, 0xcc, 0x60, 0x70, 0xcc,
 0x80, 0x90, 0xcc, 0xa0, 0xb0, 0xcc,
 0xc0, 0xd0, 0xcc, 0xe0, 0xf0, 0xcc,
 0x00, 0x10, 0xdd, 0x20, 0x30, 0xdd,
 0x40, 0x50, 0xdd, 0x60, 0x70, 0xdd,
 0x80, 0x90, 0xdd, 0xa0, 0xb0, 0xdd,
 0xc0, 0xd0, 0xdd, 0xe0, 0xf0, 0xdd,
 0x00, 0x10, 0xee, 0x20, 0x30, 0xee,
 0x40, 0x50, 0xee, 0x60, 0x70, 0xee,
 0x80, 0x90, 0xee, 0xa0, 0xb0, 0xee,
 0xc0, 0xd0, 0xee, 0xe0, 0xf0, 0xee,
 0x00, 0x10, 0xff, 0x20, 0x30, 0xff,
 0x40, 0x50, 0xff, 0x60, 0x70, 0xff,
 0x80, 0x90, 0xff, 0xa0, 0xb0, 0xff,
 0xc0, 0xd0, 0xff, 0xe0, 0xf0, 0xff,
};


code BYTE tblFixGamma18_N[]=
{
 0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
 0x02, 0x03, 0x00, 0x04, 0x06, 0x00,
 0x08, 0x09, 0x00, 0x0c, 0x0e, 0x00,
 0x10, 0x13, 0x00, 0x16, 0x18, 0x00,
 0x1c, 0x1f, 0x00, 0x22, 0x26, 0x00,
 0x29, 0x2d, 0x00, 0x31, 0x35, 0x00,
 0x3a, 0x3e, 0x00, 0x43, 0x47, 0x00,
 0x4c, 0x51, 0x00, 0x56, 0x5c, 0x00,
 0x61, 0x67, 0x00, 0x6c, 0x72, 0x00,
 0x78, 0x7e, 0x00, 0x85, 0x8b, 0x00,
 0x91, 0x98, 0x00, 0x9f, 0xa6, 0x00,
 0xad, 0xb4, 0x00, 0xbb, 0xc3, 0x00,
 0xca, 0xd2, 0x00, 0xda, 0xe1, 0x00,
 0xea, 0xf2, 0x00, 0xfa, 0x02, 0x10,
 0x0b, 0x14, 0x11, 0x1c, 0x25, 0x11,
 0x2e, 0x37, 0x11, 0x41, 0x4a, 0x11,
 0x54, 0x5d, 0x11, 0x67, 0x71, 0x11,
 0x7b, 0x85, 0x11, 0x8f, 0x99, 0x11,
 0xa4, 0xae, 0x11, 0xb9, 0xc4, 0x11,
 0xcf, 0xda, 0x11, 0xe5, 0xf0, 0x11,
 0xfc, 0x07, 0x21, 0x13, 0x1f, 0x22,
 0x2a, 0x36, 0x22, 0x42, 0x4f, 0x22,
 0x5b, 0x67, 0x22, 0x74, 0x80, 0x22,
 0x8d, 0x9a, 0x22, 0xa7, 0xb4, 0x22,
 0xc1, 0xce, 0x22, 0xdc, 0xe9, 0x22,
 0xf7, 0x05, 0x32, 0x12, 0x20, 0x33,
 0x2e, 0x3d, 0x33, 0x4b, 0x59, 0x33,
 0x68, 0x76, 0x33, 0x85, 0x94, 0x33,
 0xa3, 0xb2, 0x33, 0xc1, 0xd0, 0x33,
 0xdf, 0xef, 0x33, 0xfe, 0x0e, 0x43,
 0x1e, 0x2e, 0x44, 0x3e, 0x4e, 0x44,
 0x5e, 0x6e, 0x44, 0x7f, 0x8f, 0x44,
 0xa0, 0xb1, 0x44, 0xc1, 0xd2, 0x44,
 0xe3, 0xf4, 0x44, 0x06, 0x17, 0x55,
 0x28, 0x3a, 0x55, 0x4c, 0x5d, 0x55,
 0x6f, 0x81, 0x55, 0x93, 0xa5, 0x55,
 0xb7, 0xca, 0x55, 0xdc, 0xef, 0x55,
 0x01, 0x14, 0x66, 0x27, 0x3a, 0x66,
 0x4d, 0x60, 0x66, 0x74, 0x87, 0x66,
 0x9a, 0xae, 0x66, 0xc2, 0xd5, 0x66,
 0xe9, 0xfd, 0x66, 0x11, 0x25, 0x77,
 0x3a, 0x4e, 0x77, 0x62, 0x77, 0x77,
 0x8c, 0xa0, 0x77, 0xb5, 0xca, 0x77,
 0xdf, 0xf4, 0x77, 0x0a, 0x1f, 0x88,
 0x34, 0x4a, 0x88, 0x60, 0x75, 0x88,
 0x8b, 0xa1, 0x88, 0xb7, 0xcd, 0x88,
 0xe3, 0xfa, 0x88, 0x10, 0x27, 0x99,
 0x3d, 0x54, 0x99, 0x6b, 0x82, 0x99,
 0x99, 0xb0, 0x99, 0xc7, 0xde, 0x99,
 0xf6, 0x0d, 0xa9, 0x25, 0x3c, 0xaa,
 0x54, 0x6c, 0xaa, 0x84, 0x9c, 0xaa,
 0xb4, 0xcc, 0xaa, 0xe4, 0xfd, 0xaa,
 0x15, 0x2e, 0xbb, 0x47, 0x5f, 0xbb,
 0x78, 0x91, 0xbb, 0xaa, 0xc4, 0xbb,
 0xdd, 0xf6, 0xbb, 0x10, 0x29, 0xcc,
 0x43, 0x5d, 0xcc, 0x76, 0x90, 0xcc,
 0xaa, 0xc4, 0xcc, 0xdf, 0xf9, 0xcc,
 0x13, 0x2e, 0xdd, 0x48, 0x63, 0xdd,
 0x7e, 0x99, 0xdd, 0xb4, 0xcf, 0xdd,
 0xea, 0x05, 0xed, 0x20, 0x3c, 0xee,
 0x57, 0x73, 0xee, 0x8e, 0xaa, 0xee,
 0xc6, 0xe2, 0xee, 0xfe, 0x1a, 0xfe,
 0x36, 0x53, 0xff, 0x6f, 0x8c, 0xff,
 0xa8, 0xc5, 0xff, 0xe2, 0xff, 0xff,
};

code BYTE tblFixGamma20_N[] =
{
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x01, 0x01, 0x00, 0x02, 0x03, 0x00,
 0x04, 0x05, 0x00, 0x06, 0x07, 0x00,
 0x09, 0x0a, 0x00, 0x0c, 0x0e, 0x00,
 0x10, 0x12, 0x00, 0x14, 0x16, 0x00,
 0x19, 0x1b, 0x00, 0x1e, 0x21, 0x00,
 0x24, 0x27, 0x00, 0x2a, 0x2d, 0x00,
 0x31, 0x34, 0x00, 0x38, 0x3c, 0x00,
 0x40, 0x44, 0x00, 0x48, 0x4d, 0x00,
 0x51, 0x56, 0x00, 0x5a, 0x5f, 0x00,
 0x64, 0x69, 0x00, 0x6f, 0x74, 0x00,
 0x79, 0x7f, 0x00, 0x85, 0x8b, 0x00,
 0x91, 0x97, 0x00, 0x9d, 0xa3, 0x00,
 0xaa, 0xb0, 0x00, 0xb7, 0xbe, 0x00,
 0xc5, 0xcc, 0x00, 0xd3, 0xdb, 0x00,
 0xe2, 0xea, 0x00, 0xf2, 0xf9, 0x00,
 0x01, 0x0a, 0x11, 0x12, 0x1a, 0x11,
 0x23, 0x2b, 0x11, 0x34, 0x3d, 0x11,
 0x46, 0x4f, 0x11, 0x58, 0x62, 0x11,
 0x6b, 0x75, 0x11, 0x7f, 0x89, 0x11,
 0x93, 0x9d, 0x11, 0xa7, 0xb1, 0x11,
 0xbc, 0xc7, 0x11, 0xd1, 0xdc, 0x11,
 0xe7, 0xf2, 0x11, 0xfe, 0x09, 0x21,
 0x15, 0x20, 0x22, 0x2c, 0x38, 0x22,
 0x44, 0x50, 0x22, 0x5c, 0x69, 0x22,
 0x75, 0x82, 0x22, 0x8f, 0x9c, 0x22,
 0xa9, 0xb6, 0x22, 0xc3, 0xd1, 0x22,
 0xde, 0xec, 0x22, 0xfa, 0x07, 0x32,
 0x15, 0x24, 0x33, 0x32, 0x40, 0x33,
 0x4f, 0x5e, 0x33, 0x6c, 0x7b, 0x33,
 0x8a, 0x9a, 0x33, 0xa9, 0xb8, 0x33,
 0xc8, 0xd7, 0x33, 0xe7, 0xf7, 0x33,
 0x07, 0x17, 0x44, 0x28, 0x38, 0x44,
 0x49, 0x59, 0x44, 0x6a, 0x7b, 0x44,
 0x8c, 0x9d, 0x44, 0xaf, 0xc0, 0x44,
 0xd2, 0xe4, 0x44, 0xf5, 0x07, 0x54,
 0x19, 0x2c, 0x55, 0x3e, 0x50, 0x55,
 0x63, 0x76, 0x55, 0x88, 0x9b, 0x55,
 0xae, 0xc2, 0x55, 0xd5, 0xe8, 0x55,
 0xfc, 0x10, 0x65, 0x24, 0x38, 0x66,
 0x4c, 0x60, 0x66, 0x74, 0x89, 0x66,
 0x9d, 0xb2, 0x66, 0xc7, 0xdc, 0x66,
 0xf1, 0x06, 0x76, 0x1c, 0x31, 0x77,
 0x47, 0x5c, 0x77, 0x72, 0x88, 0x77,
 0x9e, 0xb4, 0x77, 0xcb, 0xe1, 0x77,
 0xf8, 0x0f, 0x87, 0x26, 0x3c, 0x88,
 0x54, 0x6b, 0x88, 0x82, 0x9a, 0x88,
 0xb1, 0xc9, 0x88, 0xe1, 0xf9, 0x88,
 0x11, 0x29, 0x99, 0x42, 0x5a, 0x99,
 0x73, 0x8c, 0x99, 0xa4, 0xbd, 0x99,
 0xd7, 0xf0, 0x99, 0x09, 0x23, 0xaa,
 0x3c, 0x56, 0xaa, 0x70, 0x8a, 0xaa,
 0xa4, 0xbe, 0xaa, 0xd9, 0xf3, 0xaa,
 0x0e, 0x29, 0xbb, 0x44, 0x5f, 0xbb,
 0x7a, 0x95, 0xbb, 0xb0, 0xcc, 0xbb,
 0xe8, 0x03, 0xcb, 0x1f, 0x3b, 0xcc,
 0x57, 0x74, 0xcc, 0x90, 0xad, 0xcc,
 0xc9, 0xe6, 0xcc, 0x03, 0x20, 0xdd,
 0x3d, 0x5a, 0xdd, 0x78, 0x95, 0xdd,
 0xb3, 0xd1, 0xdd, 0xef, 0x0d, 0xed,
 0x2b, 0x49, 0xee, 0x68, 0x86, 0xee,
 0xa5, 0xc4, 0xee, 0xe3, 0x02, 0xfe,
 0x21, 0x40, 0xff, 0x5f, 0x7f, 0xff,
 0x9f, 0xbf, 0xff, 0xde, 0xff, 0xff,
};

code BYTE tblFixGamma090_N[] =
{
 0x00, 0x1B, 0x00, 0x33, 0x4A, 0x00,
0x60, 0x76, 0x00, 0x8B, 0xA0, 0x00,
0xB4, 0xC9, 0x00, 0xDD, 0xF1, 0x00,
0x04, 0x18, 0x11, 0x2B, 0x3E, 0x11,
0x51, 0x64, 0x11, 0x77, 0x8A, 0x11,
0x9C, 0xAF, 0x11, 0xC1, 0xD4, 0x11,
0xE6, 0xF8, 0x11, 0x0A, 0x1C, 0x22,
0x2E, 0x40, 0x22, 0x52, 0x64, 0x22,
0x76, 0x87, 0x22, 0x99, 0xAB, 0x22,
0xBC, 0xCE, 0x22, 0xDF, 0xF0, 0x22,
0x02, 0x13, 0x33, 0x24, 0x36, 0x33,
0x47, 0x58, 0x33, 0x69, 0x7A, 0x33,
0x8B, 0x9C, 0x33, 0xAD, 0xBE, 0x33,
0xCF, 0xE0, 0x33, 0xF1, 0x01, 0x43,
0x12, 0x23, 0x44, 0x34, 0x44, 0x44,
0x55, 0x66, 0x44, 0x76, 0x87, 0x44,
0x97, 0xA8, 0x44, 0xB8, 0xC9, 0x44,
0xD9, 0xEA, 0x44, 0xFA, 0x0A, 0x54,
0x1B, 0x2B, 0x55, 0x3B, 0x4C, 0x55,
0x5C, 0x6C, 0x55, 0x7C, 0x8D, 0x55,
0x9D, 0xAD, 0x55, 0xBD, 0xCD, 0x55,
0xDD, 0xED, 0x55, 0xFD, 0x0E, 0x65,
0x1E, 0x2E, 0x66, 0x3E, 0x4E, 0x66,
0x5D, 0x6D, 0x66, 0x7D, 0x8D, 0x66,
0x9D, 0xAD, 0x66, 0xBD, 0xCD, 0x66,
0xDD, 0xEC, 0x66, 0xFC, 0x0C, 0x76,
0x1C, 0x2B, 0x77, 0x3B, 0x4B, 0x77,
0x5B, 0x6A, 0x77, 0x7A, 0x8A, 0x77,
0x99, 0xA9, 0x77, 0xB8, 0xC8, 0x77,
0xD8, 0xE7, 0x77, 0xF7, 0x06, 0x87,
0x16, 0x25, 0x88, 0x35, 0x44, 0x88,
0x54, 0x63, 0x88, 0x73, 0x82, 0x88,
0x92, 0xA1, 0x88, 0xB0, 0xC0, 0x88,
0xCF, 0xDF, 0x88, 0xEE, 0xFD, 0x88,
0x0D, 0x1C, 0x99, 0x2B, 0x3B, 0x99,
0x4A, 0x59, 0x99, 0x68, 0x78, 0x99,
0x87, 0x96, 0x99, 0xA5, 0xB5, 0x99,
0xC4, 0xD3, 0x99, 0xE2, 0xF1, 0x99,
0x01, 0x10, 0xAA, 0x1F, 0x2E, 0xAA,
0x3D, 0x4C, 0xAA, 0x5B, 0x6B, 0xAA,
0x7A, 0x89, 0xAA, 0x98, 0xA7, 0xAA,
0xB6, 0xC5, 0xAA, 0xD4, 0xE3, 0xAA,
0xF2, 0x01, 0xBA, 0x10, 0x1F, 0xBB,
0x2E, 0x3D, 0xBB, 0x4C, 0x5B, 0xBB,
0x6A, 0x79, 0xBB, 0x88, 0x97, 0xBB,
0xA6, 0xB4, 0xBB, 0xC3, 0xD2, 0xBB,
0xE1, 0xF0, 0xBB, 0xFF, 0x0E, 0xCB,
0x1D, 0x2B, 0xCC, 0x3A, 0x49, 0xCC,
0x58, 0x67, 0xCC, 0x76, 0x84, 0xCC,
0x93, 0xA2, 0xCC, 0xB1, 0xBF, 0xCC,
0xCE, 0xDD, 0xCC, 0xEC, 0xFA, 0xCC,
0x09, 0x18, 0xDD, 0x27, 0x35, 0xDD,
0x44, 0x53, 0xDD, 0x61, 0x70, 0xDD,
0x7F, 0x8D, 0xDD, 0x9C, 0xAB, 0xDD,
0xB9, 0xC8, 0xDD, 0xD7, 0xE5, 0xDD,
0xF4, 0x02, 0xED, 0x11, 0x20, 0xEE,
0x2E, 0x3D, 0xEE, 0x4B, 0x5A, 0xEE,
0x69, 0x77, 0xEE, 0x86, 0x94, 0xEE,
0xA3, 0xB1, 0xEE, 0xC0, 0xCE, 0xEE,
0xDD, 0xEB, 0xEE, 0xFA, 0x08, 0xFE,
0x17, 0x25, 0xFF, 0x34, 0x42, 0xFF,
0x51, 0x5F, 0xFF, 0x6E, 0x7C, 0xFF,
0x8B, 0x99, 0xFF, 0xA7, 0xB6, 0xFF,
0xC4, 0xD3, 0xFF, 0xE1, 0xF0, 0xFF,
};

code BYTE tblFixGamma081_N[] =
{
 0x00, 0x2D, 0x00, 0x50, 0x6F, 0x00,
0x8C, 0xA8, 0x00, 0xC3, 0xDD, 0x00,
0xF7, 0x0F, 0x10, 0x28, 0x3F, 0x11,
0x57, 0x6E, 0x11, 0x84, 0x9B, 0x11,
0xB1, 0xC7, 0x11, 0xDC, 0xF1, 0x11,
0x07, 0x1B, 0x22, 0x30, 0x45, 0x22,
0x59, 0x6D, 0x22, 0x81, 0x95, 0x22,
0xA9, 0xBD, 0x22, 0xD0, 0xE4, 0x22,
0xF7, 0x0A, 0x32, 0x1D, 0x30, 0x33,
0x43, 0x56, 0x33, 0x68, 0x7B, 0x33,
0x8D, 0xA0, 0x33, 0xB2, 0xC4, 0x33,
0xD7, 0xE9, 0x33, 0xFB, 0x0C, 0x43,
0x1E, 0x30, 0x44, 0x42, 0x53, 0x44,
0x65, 0x76, 0x44, 0x88, 0x99, 0x44,
0xAB, 0xBC, 0x44, 0xCD, 0xDE, 0x44,
0xEF, 0x00, 0x54, 0x11, 0x22, 0x55,
0x33, 0x44, 0x55, 0x55, 0x65, 0x55,
0x76, 0x87, 0x55, 0x97, 0xA8, 0x55,
0xB8, 0xC9, 0x55, 0xD9, 0xEA, 0x55,
0xFA, 0x0A, 0x65, 0x1B, 0x2B, 0x66,
0x3B, 0x4B, 0x66, 0x5B, 0x6B, 0x66,
0x7B, 0x8B, 0x66, 0x9B, 0xAB, 0x66,
0xBB, 0xCB, 0x66, 0xDB, 0xEA, 0x66,
0xFA, 0x0A, 0x76, 0x1A, 0x29, 0x77,
0x39, 0x48, 0x77, 0x58, 0x67, 0x77,
0x77, 0x86, 0x77, 0x96, 0xA5, 0x77,
0xB5, 0xC4, 0x77, 0xD3, 0xE3, 0x77,
0xF2, 0x01, 0x87, 0x10, 0x20, 0x88,
0x2F, 0x3E, 0x88, 0x4D, 0x5C, 0x88,
0x6B, 0x7A, 0x88, 0x89, 0x98, 0x88,
0xA7, 0xB6, 0x88, 0xC5, 0xD4, 0x88,
0xE3, 0xF2, 0x88, 0x00, 0x0F, 0x99,
0x1E, 0x2D, 0x99, 0x3C, 0x4A, 0x99,
0x59, 0x68, 0x99, 0x76, 0x85, 0x99,
0x94, 0xA2, 0x99, 0xB1, 0xBF, 0x99,
0xCE, 0xDC, 0x99, 0xEB, 0xF9, 0x99,
0x08, 0x16, 0xAA, 0x25, 0x33, 0xAA,
0x41, 0x50, 0xAA, 0x5E, 0x6C, 0xAA,
0x7B, 0x89, 0xAA, 0x97, 0xA6, 0xAA,
0xB4, 0xC2, 0xAA, 0xD0, 0xDE, 0xAA,
0xED, 0xFB, 0xAA, 0x09, 0x17, 0xBB,
0x25, 0x33, 0xBB, 0x41, 0x4F, 0xBB,
0x5D, 0x6B, 0xBB, 0x79, 0x87, 0xBB,
0x95, 0xA3, 0xBB, 0xB1, 0xBF, 0xBB,
0xCD, 0xDB, 0xBB, 0xE9, 0xF7, 0xBB,
0x05, 0x12, 0xCC, 0x20, 0x2E, 0xCC,
0x3C, 0x4A, 0xCC, 0x57, 0x65, 0xCC,
0x73, 0x81, 0xCC, 0x8E, 0x9C, 0xCC,
0xAA, 0xB7, 0xCC, 0xC5, 0xD3, 0xCC,
0xE0, 0xEE, 0xCC, 0xFC, 0x09, 0xDC,
0x17, 0x24, 0xDD, 0x32, 0x3F, 0xDD,
0x4D, 0x5A, 0xDD, 0x68, 0x75, 0xDD,
0x83, 0x90, 0xDD, 0x9E, 0xAB, 0xDD,
0xB9, 0xC6, 0xDD, 0xD3, 0xE1, 0xDD,
0xEE, 0xFC, 0xDD, 0x09, 0x16, 0xEE,
0x24, 0x31, 0xEE, 0x3E, 0x4C, 0xEE,
0x59, 0x66, 0xEE, 0x73, 0x81, 0xEE,
0x8E, 0x9B, 0xEE, 0xA8, 0xB6, 0xEE,
0xC3, 0xD0, 0xEE, 0xDD, 0xEA, 0xEE,
0xF7, 0x05, 0xFE, 0x12, 0x1F, 0xFF,
0x2C, 0x39, 0xFF, 0x46, 0x53, 0xFF,
0x60, 0x6D, 0xFF, 0x7A, 0x88, 0xFF,
0x95, 0xA2, 0xFF, 0xAF, 0xBC, 0xFF,
0xC9, 0xD6, 0xFF, 0xE3, 0xF0, 0xFF,
};
code BYTE tblFixGamma110_N[] =
{
 0x00, 0x09, 0x00, 0x13, 0x1E, 0x00,
0x2A, 0x35, 0x00, 0x41, 0x4E, 0x00,
0x5A, 0x67, 0x00, 0x73, 0x80, 0x00,
0x8D, 0x9A, 0x00, 0xA7, 0xB4, 0x00,
0xC2, 0xCF, 0x00, 0xDC, 0xEA, 0x00,
0xF8, 0x05, 0x10, 0x13, 0x21, 0x11,
0x2F, 0x3D, 0x11, 0x4B, 0x59, 0x11,
0x67, 0x75, 0x11, 0x83, 0x91, 0x11,
0xA0, 0xAE, 0x11, 0xBC, 0xCB, 0x11,
0xD9, 0xE8, 0x11, 0xF6, 0x05, 0x21,
0x13, 0x22, 0x22, 0x31, 0x3F, 0x22,
0x4E, 0x5D, 0x22, 0x6C, 0x7A, 0x22,
0x89, 0x98, 0x22, 0xA7, 0xB6, 0x22,
0xC5, 0xD4, 0x22, 0xE3, 0xF2, 0x22,
0x01, 0x11, 0x33, 0x20, 0x2F, 0x33,
0x3E, 0x4D, 0x33, 0x5D, 0x6C, 0x33,
0x7B, 0x8B, 0x33, 0x9A, 0xA9, 0x33,
0xB9, 0xC8, 0x33, 0xD8, 0xE7, 0x33,
0xF7, 0x06, 0x43, 0x16, 0x25, 0x44,
0x35, 0x44, 0x44, 0x54, 0x64, 0x44,
0x73, 0x83, 0x44, 0x93, 0xA3, 0x44,
0xB2, 0xC2, 0x44, 0xD2, 0xE2, 0x44,
0xF1, 0x01, 0x54, 0x11, 0x21, 0x55,
0x31, 0x41, 0x55, 0x51, 0x61, 0x55,
0x71, 0x81, 0x55, 0x90, 0xA1, 0x55,
0xB1, 0xC1, 0x55, 0xD1, 0xE1, 0x55,
0xF1, 0x01, 0x65, 0x11, 0x21, 0x66,
0x31, 0x41, 0x66, 0x52, 0x62, 0x66,
0x72, 0x82, 0x66, 0x92, 0xA3, 0x66,
0xB3, 0xC3, 0x66, 0xD3, 0xE4, 0x66,
0xF4, 0x04, 0x76, 0x15, 0x25, 0x77,
0x35, 0x46, 0x77, 0x56, 0x67, 0x77,
0x77, 0x88, 0x77, 0x98, 0xA8, 0x77,
0xB9, 0xC9, 0x77, 0xDA, 0xEA, 0x77,
0xFB, 0x0B, 0x87, 0x1C, 0x2D, 0x88,
0x3D, 0x4E, 0x88, 0x5E, 0x6F, 0x88,
0x80, 0x90, 0x88, 0xA1, 0xB1, 0x88,
0xC2, 0xD3, 0x88, 0xE3, 0xF4, 0x88,
0x05, 0x16, 0x99, 0x26, 0x37, 0x99,
0x48, 0x59, 0x99, 0x69, 0x7A, 0x99,
0x8B, 0x9C, 0x99, 0xAD, 0xBD, 0x99,
0xCE, 0xDF, 0x99, 0xF0, 0x01, 0xA9,
0x12, 0x23, 0xAA, 0x33, 0x44, 0xAA,
0x55, 0x66, 0xAA, 0x77, 0x88, 0xAA,
0x99, 0xAA, 0xAA, 0xBB, 0xCC, 0xAA,
0xDD, 0xEE, 0xAA, 0xFF, 0x10, 0xBA,
0x21, 0x32, 0xBB, 0x43, 0x54, 0xBB,
0x65, 0x76, 0xBB, 0x87, 0x98, 0xBB,
0xAA, 0xBB, 0xBB, 0xCC, 0xDD, 0xBB,
0xEE, 0xFF, 0xBB, 0x10, 0x22, 0xCC,
0x33, 0x44, 0xCC, 0x55, 0x66, 0xCC,
0x77, 0x89, 0xCC, 0x9A, 0xAB, 0xCC,
0xBC, 0xCE, 0xCC, 0xDF, 0xF0, 0xCC,
0x01, 0x13, 0xDD, 0x24, 0x35, 0xDD,
0x47, 0x58, 0xDD, 0x69, 0x7B, 0xDD,
0x8C, 0x9D, 0xDD, 0xAF, 0xC0, 0xDD,
0xD1, 0xE3, 0xDD, 0xF4, 0x05, 0xED,
0x17, 0x28, 0xEE, 0x3A, 0x4B, 0xEE,
0x5D, 0x6E, 0xEE, 0x7F, 0x91, 0xEE,
0xA2, 0xB4, 0xEE, 0xC5, 0xD7, 0xEE,
0xE8, 0xFA, 0xEE, 0x0B, 0x1D, 0xFF,
0x2E, 0x40, 0xFF, 0x51, 0x63, 0xFF,
0x74, 0x86, 0xFF, 0x98, 0xA9, 0xFF,
0xBB, 0xCC, 0xFF, 0xDE, 0xF0, 0xFF,
};
code BYTE tblFixGamma118_N[] =
{
0x00, 0x05, 0x00, 0x0D, 0x15, 0x00,
0x1E, 0x27, 0x00, 0x30, 0x3A, 0x00,
0x44, 0x4E, 0x00, 0x59, 0x63, 0x00,
0x6E, 0x79, 0x00, 0x84, 0x90, 0x00,
0x9B, 0xA7, 0x00, 0xB2, 0xBE, 0x00,
0xCA, 0xD6, 0x00, 0xE2, 0xEE, 0x00,
0xFA, 0x07, 0x10, 0x13, 0x20, 0x11,
0x2D, 0x39, 0x11, 0x46, 0x53, 0x11,
0x60, 0x6D, 0x11, 0x7A, 0x87, 0x11,
0x94, 0xA2, 0x11, 0xAF, 0xBD, 0x11,
0xCA, 0xD8, 0x11, 0xE5, 0xF3, 0x11,
0x01, 0x0E, 0x22, 0x1C, 0x2A, 0x22,
0x38, 0x46, 0x22, 0x54, 0x62, 0x22,
0x70, 0x7F, 0x22, 0x8D, 0x9B, 0x22,
0xAA, 0xB8, 0x22, 0xC6, 0xD5, 0x22,
0xE3, 0xF2, 0x22, 0x01, 0x0F, 0x33,
0x1E, 0x2D, 0x33, 0x3B, 0x4A, 0x33,
0x59, 0x68, 0x33, 0x77, 0x86, 0x33,
0x95, 0xA4, 0x33, 0xB3, 0xC2, 0x33,
0xD1, 0xE1, 0x33, 0xF0, 0xFF, 0x33,
0x0E, 0x1E, 0x44, 0x2D, 0x3D, 0x44,
0x4C, 0x5B, 0x44, 0x6B, 0x7B, 0x44,
0x8A, 0x9A, 0x44, 0xA9, 0xB9, 0x44,
0xC9, 0xD8, 0x44, 0xE8, 0xF8, 0x44,
0x08, 0x18, 0x55, 0x28, 0x37, 0x55,
0x47, 0x57, 0x55, 0x67, 0x77, 0x55,
0x87, 0x98, 0x55, 0xA8, 0xB8, 0x55,
0xC8, 0xD8, 0x55, 0xE8, 0xF9, 0x55,
0x09, 0x19, 0x66, 0x29, 0x3A, 0x66,
0x4A, 0x5B, 0x66, 0x6B, 0x7B, 0x66,
0x8C, 0x9C, 0x66, 0xAD, 0xBD, 0x66,
0xCE, 0xDF, 0x66, 0xEF, 0x00, 0x76,
0x11, 0x21, 0x77, 0x32, 0x43, 0x77,
0x53, 0x64, 0x77, 0x75, 0x86, 0x77,
0x97, 0xA8, 0x77, 0xB8, 0xC9, 0x77,
0xDA, 0xEB, 0x77, 0xFC, 0x0D, 0x87,
0x1E, 0x2F, 0x88, 0x40, 0x51, 0x88,
0x63, 0x74, 0x88, 0x85, 0x96, 0x88,
0xA7, 0xB8, 0x88, 0xCA, 0xDB, 0x88,
0xEC, 0xFD, 0x88, 0x0F, 0x20, 0x99,
0x31, 0x43, 0x99, 0x54, 0x66, 0x99,
0x77, 0x89, 0x99, 0x9A, 0xAB, 0x99,
0xBD, 0xCF, 0x99, 0xE0, 0xF2, 0x99,
0x03, 0x15, 0xAA, 0x26, 0x38, 0xAA,
0x4A, 0x5B, 0xAA, 0x6D, 0x7F, 0xAA,
0x90, 0xA2, 0xAA, 0xB4, 0xC6, 0xAA,
0xD8, 0xE9, 0xAA, 0xFB, 0x0D, 0xBA,
0x1F, 0x31, 0xBB, 0x43, 0x55, 0xBB,
0x67, 0x78, 0xBB, 0x8A, 0x9C, 0xBB,
0xAE, 0xC0, 0xBB, 0xD2, 0xE5, 0xBB,
0xF7, 0x09, 0xCB, 0x1B, 0x2D, 0xCC,
0x3F, 0x51, 0xCC, 0x63, 0x75, 0xCC,
0x88, 0x9A, 0xCC, 0xAC, 0xBE, 0xCC,
0xD1, 0xE3, 0xCC, 0xF5, 0x07, 0xDC,
0x1A, 0x2C, 0xDD, 0x3E, 0x51, 0xDD,
0x63, 0x76, 0xDD, 0x88, 0x9A, 0xDD,
0xAD, 0xBF, 0xDD, 0xD2, 0xE4, 0xDD,
0xF7, 0x09, 0xED, 0x1C, 0x2E, 0xEE,
0x41, 0x53, 0xEE, 0x66, 0x79, 0xEE,
0x8B, 0x9E, 0xEE, 0xB1, 0xC3, 0xEE,
0xD6, 0xE9, 0xEE, 0xFB, 0x0E, 0xFE,
0x21, 0x33, 0xFF, 0x46, 0x59, 0xFF,
0x6C, 0x7E, 0xFF, 0x91, 0xA4, 0xFF,
0xB7, 0xCA, 0xFF, 0xDD, 0xF0, 0xFF,
};

code BYTE tblFixGamma127_N[] =
{
0x00, 0x03, 0x00, 0x08, 0x0E, 0x00,
0x14, 0x1B, 0x00, 0x22, 0x2A, 0x00,
0x32, 0x3A, 0x00, 0x42, 0x4B, 0x00,
0x54, 0x5D, 0x00, 0x66, 0x6F, 0x00,
0x79, 0x82, 0x00, 0x8C, 0x96, 0x00,
0xA0, 0xAB, 0x00, 0xB5, 0xC0, 0x00,
0xCA, 0xD5, 0x00, 0xE0, 0xEB, 0x00,
0xF6, 0x01, 0x10, 0x0D, 0x18, 0x11,
0x24, 0x2F, 0x11, 0x3B, 0x47, 0x11,
0x53, 0x5F, 0x11, 0x6B, 0x77, 0x11,
0x84, 0x90, 0x11, 0x9C, 0xA9, 0x11,
0xB6, 0xC2, 0x11, 0xCF, 0xDC, 0x11,
0xE9, 0xF6, 0x11, 0x03, 0x10, 0x22,
0x1D, 0x2A, 0x22, 0x38, 0x45, 0x22,
0x53, 0x60, 0x22, 0x6E, 0x7B, 0x22,
0x89, 0x97, 0x22, 0xA5, 0xB3, 0x22,
0xC1, 0xCF, 0x22, 0xDD, 0xEB, 0x22,
0xF9, 0x07, 0x32, 0x16, 0x24, 0x33,
0x32, 0x41, 0x33, 0x4F, 0x5E, 0x33,
0x6C, 0x7B, 0x33, 0x8A, 0x99, 0x33,
0xA8, 0xB6, 0x33, 0xC5, 0xD4, 0x33,
0xE3, 0xF2, 0x33, 0x02, 0x11, 0x44,
0x20, 0x2F, 0x44, 0x3F, 0x4E, 0x44,
0x5D, 0x6D, 0x44, 0x7C, 0x8C, 0x44,
0x9B, 0xAB, 0x44, 0xBB, 0xCA, 0x44,
0xDA, 0xEA, 0x44, 0xFA, 0x0A, 0x54,
0x1A, 0x2A, 0x55, 0x3A, 0x4A, 0x55,
0x5A, 0x6A, 0x55, 0x7A, 0x8A, 0x55,
0x9B, 0xAB, 0x55, 0xBB, 0xCC, 0x55,
0xDC, 0xEC, 0x55, 0xFD, 0x0D, 0x65,
0x1E, 0x2F, 0x66, 0x3F, 0x50, 0x66,
0x61, 0x71, 0x66, 0x82, 0x93, 0x66,
0xA4, 0xB5, 0x66, 0xC6, 0xD7, 0x66,
0xE8, 0xF9, 0x66, 0x0A, 0x1B, 0x77,
0x2C, 0x3D, 0x77, 0x4E, 0x5F, 0x77,
0x71, 0x82, 0x77, 0x93, 0xA5, 0x77,
0xB6, 0xC8, 0x77, 0xD9, 0xEA, 0x77,
0xFC, 0x0E, 0x87, 0x1F, 0x31, 0x88,
0x42, 0x54, 0x88, 0x66, 0x78, 0x88,
0x89, 0x9B, 0x88, 0xAD, 0xBF, 0x88,
0xD1, 0xE3, 0x88, 0xF5, 0x07, 0x98,
0x19, 0x2B, 0x99, 0x3D, 0x4F, 0x99,
0x61, 0x73, 0x99, 0x85, 0x98, 0x99,
0xAA, 0xBC, 0x99, 0xCF, 0xE1, 0x99,
0xF3, 0x06, 0xA9, 0x18, 0x2B, 0xAA,
0x3D, 0x50, 0xAA, 0x62, 0x75, 0xAA,
0x87, 0x9A, 0xAA, 0xAC, 0xBF, 0xAA,
0xD2, 0xE5, 0xAA, 0xF7, 0x0A, 0xBA,
0x1D, 0x30, 0xBB, 0x43, 0x56, 0xBB,
0x68, 0x7B, 0xBB, 0x8E, 0xA1, 0xBB,
0xB4, 0xC7, 0xBB, 0xDA, 0xEE, 0xBB,
0x01, 0x14, 0xCC, 0x27, 0x3A, 0xCC,
0x4D, 0x61, 0xCC, 0x74, 0x87, 0xCC,
0x9B, 0xAE, 0xCC, 0xC1, 0xD5, 0xCC,
0xE8, 0xFB, 0xCC, 0x0F, 0x22, 0xDD,
0x36, 0x49, 0xDD, 0x5D, 0x71, 0xDD,
0x84, 0x98, 0xDD, 0xAC, 0xBF, 0xDD,
0xD3, 0xE7, 0xDD, 0xFA, 0x0E, 0xED,
0x22, 0x36, 0xEE, 0x4A, 0x5D, 0xEE,
0x71, 0x85, 0xEE, 0x99, 0xAD, 0xEE,
0xC1, 0xD5, 0xEE, 0xE9, 0xFD, 0xEE,
0x11, 0x25, 0xFF, 0x39, 0x4E, 0xFF,
0x62, 0x76, 0xFF, 0x8A, 0x9E, 0xFF,
0xB3, 0xC7, 0xFF, 0xDB, 0xF0, 0xFF,
};

code BYTE tblFixGamma136_N[] =
{
0x00, 0x02, 0x00, 0x05, 0x09, 0x00,
0x0E, 0x13, 0x00, 0x18, 0x1E, 0x00,
0x24, 0x2B, 0x00, 0x31, 0x38, 0x00,
0x3F, 0x47, 0x00, 0x4E, 0x56, 0x00,
0x5E, 0x66, 0x00, 0x6E, 0x77, 0x00,
0x7F, 0x88, 0x00, 0x91, 0x9A, 0x00,
0xA4, 0xAD, 0x00, 0xB6, 0xC0, 0x00,
0xCA, 0xD4, 0x00, 0xDE, 0xE8, 0x00,
0xF2, 0xFC, 0x00, 0x07, 0x11, 0x11,
0x1C, 0x27, 0x11, 0x32, 0x3D, 0x11,
0x48, 0x53, 0x11, 0x5F, 0x6A, 0x11,
0x75, 0x81, 0x11, 0x8D, 0x99, 0x11,
0xA4, 0xB0, 0x11, 0xBD, 0xC9, 0x11,
0xD5, 0xE1, 0x11, 0xEE, 0xFA, 0x11,
0x07, 0x13, 0x22, 0x20, 0x2D, 0x22,
0x3A, 0x47, 0x22, 0x54, 0x61, 0x22,
0x6E, 0x7B, 0x22, 0x89, 0x96, 0x22,
0xA4, 0xB1, 0x22, 0xBF, 0xCC, 0x22,
0xDA, 0xE8, 0x22, 0xF6, 0x04, 0x32,
0x12, 0x20, 0x33, 0x2E, 0x3C, 0x33,
0x4B, 0x59, 0x33, 0x68, 0x76, 0x33,
0x85, 0x93, 0x33, 0xA2, 0xB1, 0x33,
0xBF, 0xCE, 0x33, 0xDD, 0xEC, 0x33,
0xFB, 0x0A, 0x43, 0x1A, 0x29, 0x44,
0x38, 0x47, 0x44, 0x57, 0x66, 0x44,
0x76, 0x85, 0x44, 0x95, 0xA5, 0x44,
0xB4, 0xC4, 0x44, 0xD4, 0xE4, 0x44,
0xF4, 0x04, 0x54, 0x14, 0x24, 0x55,
0x34, 0x44, 0x55, 0x55, 0x65, 0x55,
0x75, 0x86, 0x55, 0x96, 0xA7, 0x55,
0xB7, 0xC8, 0x55, 0xD8, 0xE9, 0x55,
0xFA, 0x0B, 0x65, 0x1C, 0x2D, 0x66,
0x3D, 0x4E, 0x66, 0x60, 0x71, 0x66,
0x82, 0x93, 0x66, 0xA4, 0xB5, 0x66,
0xC7, 0xD8, 0x66, 0xEA, 0xFB, 0x66,
0x0D, 0x1E, 0x77, 0x30, 0x41, 0x77,
0x53, 0x65, 0x77, 0x77, 0x88, 0x77,
0x9A, 0xAC, 0x77, 0xBE, 0xD0, 0x77,
0xE2, 0xF4, 0x77, 0x06, 0x19, 0x88,
0x2B, 0x3D, 0x88, 0x4F, 0x62, 0x88,
0x74, 0x86, 0x88, 0x99, 0xAB, 0x88,
0xBE, 0xD1, 0x88, 0xE3, 0xF6, 0x88,
0x09, 0x1B, 0x99, 0x2E, 0x41, 0x99,
0x54, 0x67, 0x99, 0x7A, 0x8D, 0x99,
0xA0, 0xB3, 0x99, 0xC6, 0xD9, 0x99,
0xEC, 0xFF, 0x99, 0x13, 0x26, 0xAA,
0x39, 0x4D, 0xAA, 0x60, 0x73, 0xAA,
0x87, 0x9A, 0xAA, 0xAE, 0xC2, 0xAA,
0xD5, 0xE9, 0xAA, 0xFD, 0x10, 0xBA,
0x24, 0x38, 0xBB, 0x4C, 0x60, 0xBB,
0x74, 0x87, 0xBB, 0x9B, 0xAF, 0xBB,
0xC4, 0xD8, 0xBB, 0xEC, 0x00, 0xCB,
0x14, 0x28, 0xCC, 0x3D, 0x51, 0xCC,
0x65, 0x7A, 0xCC, 0x8E, 0xA3, 0xCC,
0xB7, 0xCC, 0xCC, 0xE0, 0xF5, 0xCC,
0x09, 0x1E, 0xDD, 0x33, 0x47, 0xDD,
0x5C, 0x71, 0xDD, 0x86, 0x9B, 0xDD,
0xAF, 0xC4, 0xDD, 0xD9, 0xEE, 0xDD,
0x03, 0x18, 0xEE, 0x2D, 0x43, 0xEE,
0x58, 0x6D, 0xEE, 0x82, 0x97, 0xEE,
0xAD, 0xC2, 0xEE, 0xD7, 0xED, 0xEE,
0x02, 0x17, 0xFF, 0x2D, 0x42, 0xFF,
0x58, 0x6D, 0xFF, 0x83, 0x99, 0xFF,
0xAE, 0xC4, 0xFF, 0xDA, 0xF0, 0xFF,
};

code BYTE tblFixGamma072_N[] =
{
 0x00, 0x4B, 0x00, 0x7C, 0xA6, 0x00,
0xCC, 0xF0, 0x00, 0x12, 0x32, 0x11,
0x51, 0x6F, 0x11, 0x8C, 0xA8, 0x11,
0xC3, 0xDE, 0x11, 0xF8, 0x12, 0x21,
0x2B, 0x44, 0x22, 0x5C, 0x75, 0x22,
0x8C, 0xA4, 0x22, 0xBB, 0xD1, 0x22,
0xE8, 0xFE, 0x22, 0x14, 0x2A, 0x33,
0x3F, 0x54, 0x33, 0x69, 0x7E, 0x33,
0x93, 0xA8, 0x33, 0xBC, 0xD0, 0x33,
0xE4, 0xF8, 0x33, 0x0C, 0x1F, 0x44,
0x33, 0x46, 0x44, 0x59, 0x6C, 0x44,
0x7F, 0x92, 0x44, 0xA4, 0xB7, 0x44,
0xC9, 0xDC, 0x44, 0xEE, 0x00, 0x54,
0x12, 0x24, 0x55, 0x36, 0x48, 0x55,
0x59, 0x6B, 0x55, 0x7C, 0x8E, 0x55,
0x9F, 0xB0, 0x55, 0xC1, 0xD2, 0x55,
0xE3, 0xF4, 0x55, 0x05, 0x16, 0x66,
0x27, 0x37, 0x66, 0x48, 0x59, 0x66,
0x69, 0x79, 0x66, 0x8A, 0x9A, 0x66,
0xAA, 0xBA, 0x66, 0xCA, 0xDA, 0x66,
0xEA, 0xFA, 0x66, 0x0A, 0x1A, 0x77,
0x2A, 0x39, 0x77, 0x49, 0x59, 0x77,
0x68, 0x78, 0x77, 0x87, 0x96, 0x77,
0xA6, 0xB5, 0x77, 0xC4, 0xD4, 0x77,
0xE3, 0xF2, 0x77, 0x01, 0x10, 0x88,
0x1F, 0x2E, 0x88, 0x3D, 0x4C, 0x88,
0x5B, 0x69, 0x88, 0x78, 0x87, 0x88,
0x95, 0xA4, 0x88, 0xB3, 0xC1, 0x88,
0xD0, 0xDE, 0x88, 0xED, 0xFB, 0x88,
0x09, 0x18, 0x99, 0x26, 0x34, 0x99,
0x43, 0x51, 0x99, 0x5F, 0x6D, 0x99,
0x7B, 0x89, 0x99, 0x97, 0xA5, 0x99,
0xB3, 0xC1, 0x99, 0xCF, 0xDD, 0x99,
0xEB, 0xF9, 0x99, 0x07, 0x15, 0xAA,
0x22, 0x30, 0xAA, 0x3E, 0x4B, 0xAA,
0x59, 0x67, 0xAA, 0x74, 0x82, 0xAA,
0x8F, 0x9D, 0xAA, 0xAA, 0xB8, 0xAA,
0xC5, 0xD3, 0xAA, 0xE0, 0xED, 0xAA,
0xFB, 0x08, 0xBA, 0x15, 0x22, 0xBB,
0x30, 0x3D, 0xBB, 0x4A, 0x57, 0xBB,
0x64, 0x71, 0xBB, 0x7F, 0x8C, 0xBB,
0x99, 0xA6, 0xBB, 0xB3, 0xC0, 0xBB,
0xCD, 0xDA, 0xBB, 0xE7, 0xF3, 0xBB,
0x00, 0x0D, 0xCC, 0x1A, 0x27, 0xCC,
0x34, 0x40, 0xCC, 0x4D, 0x5A, 0xCC,
0x67, 0x73, 0xCC, 0x80, 0x8D, 0xCC,
0x99, 0xA6, 0xCC, 0xB2, 0xBF, 0xCC,
0xCC, 0xD8, 0xCC, 0xE5, 0xF1, 0xCC,
0xFE, 0x0A, 0xDC, 0x16, 0x23, 0xDD,
0x2F, 0x3C, 0xDD, 0x48, 0x54, 0xDD,
0x61, 0x6D, 0xDD, 0x79, 0x86, 0xDD,
0x92, 0x9E, 0xDD, 0xAA, 0xB7, 0xDD,
0xC3, 0xCF, 0xDD, 0xDB, 0xE7, 0xDD,
0xF4, 0x00, 0xED, 0x0C, 0x18, 0xEE,
0x24, 0x30, 0xEE, 0x3C, 0x48, 0xEE,
0x54, 0x60, 0xEE, 0x6C, 0x78, 0xEE,
0x84, 0x90, 0xEE, 0x9C, 0xA8, 0xEE,
0xB4, 0xC0, 0xEE, 0xCB, 0xD7, 0xEE,
0xE3, 0xEF, 0xEE, 0xFB, 0x06, 0xFE,
0x12, 0x1E, 0xFF, 0x2A, 0x36, 0xFF,
0x41, 0x4D, 0xFF, 0x59, 0x64, 0xFF,
0x70, 0x7C, 0xFF, 0x87, 0x93, 0xFF,
0x9F, 0xAA, 0xFF, 0xB6, 0xC1, 0xFF,
0xCD, 0xD8, 0xFF, 0xE4, 0xF0, 0xFF,
};


//fixgamma : 256 entry - 12 bits
code BYTE *tAllFixGammaTab[][3]=
{
    {tblFixGamma10_N, tblFixGamma10_N, tblFixGamma10_N,},
    {tblFixGamma18_N, tblFixGamma18_N, tblFixGamma18_N,},
    {tblFixGamma20_N, tblFixGamma20_N, tblFixGamma20_N,},
};

//fixgamma for multiple gamma (FixGma = PostGma(by2.2) / GmaSpec.)
//Gma 1.6 = PostGma + FixGma 0.72
//Gma 1.8 = PostGma & FixGma 0.81
//Gma 2.0 = PostGma & FixGma 0.9
//Gma 2.2 = PostGma & FixGma 1
//Gma 2.4 = PostGma & FixGma 1.1 
//Gma 2.6 = PostGma & FixGma 1.18
//Gma 2.8 = PostGma & FixGma 1.27
//Gma 3.0 = PostGma & FixGma 1.36
code BYTE *tAllAdjustGammaFixGammaTab[][3] =
{
    {tblFixGamma072_N, tblFixGamma072_N, tblFixGamma072_N,}, //Gma 1.6
    {tblFixGamma081_N, tblFixGamma081_N, tblFixGamma081_N,}, //Gma 1.8
    {tblFixGamma090_N, tblFixGamma090_N, tblFixGamma090_N,}, //Gma 2.0
    {tblFixGamma10_N, tblFixGamma10_N, tblFixGamma10_N,}, //Gma 2.2
    {tblFixGamma110_N, tblFixGamma110_N, tblFixGamma110_N,}, //Gma 2.4
    {tblFixGamma118_N, tblFixGamma118_N, tblFixGamma118_N,}, //Gma 2.6
    {tblFixGamma127_N, tblFixGamma127_N, tblFixGamma127_N,}, //Gma 2.8
    {tblFixGamma136_N, tblFixGamma136_N, tblFixGamma136_N,}, //Gma 3.0
};
#endif

const BYTE AutoColorCommand[] = {
    MS_Set_PostGamma,
    MS_WR_PostGamma,
    MS_SetPostGammaFromMem,
    MS_LoadColorMode,
    MS_LoadPostGamma,
    MS_Set_3DLUT,
    MS_WR_3DLUT,
    MS_Set_DICOM_Mode,
    MS_Set_GammaCurve,
    MS_Set_ColorTrackMode,
    MS_WR_ColorMatrix,
    MS_SAVE_ColorMatrix,
    MS_WR_ColorTemp,
    MS_Set_ColorTemp,
    MS_IsUse_3DLUT,
    MS_GetDeltaEVersion
};

BYTE AutoColorCalibrationHandler (WORD *_checkSum)
{
        switch(DDCBuffer[2])
        {
        #if ENABLE_DELTAE_FUNCTION
            case MS_ColorEngine_OnOff :
            {
	             //if ( DDCBuffer[3] == 0x00 )
	             //msSetColorEngine(FALSE);	//Color Engine Off
	             //else
	             //msSetColorEngine(TRUE);	//Color Engine On
            }
            break;

            case MS_Set_PostGamma :
            {
                WORD addr = 0, idx = 0;
                BYTE sum = 0, cnt = 0, mode = 0, ch = 0;
                mode = DDCBuffer[3] & 0x01; // gamma mode
                ch = DDCBuffer[4] & 0x03 ; // gamma channel
                cnt = DDCBuffer[5] ; // data size
                addr = (WORD)(DDCBuffer[6] << 8 );
                addr += DDCBuffer[7]; // start addr-hi, lo

                for(idx = 0; idx < cnt; idx++)
                {
                    sum ^=  DDCBuffer[8 + idx] ;
                    msSetPostGammaData(ch, addr + idx, DDCBuffer[8 + idx]);
                }
                *_checkSum = sum;
            }
            break;

            case MS_SetPostGammaFromMem:
            {
                DWORD _storedAddr;
                _storedAddr =  ((DWORD)DDCBuffer[3]) << 24;
        		_storedAddr +=  ((DWORD)DDCBuffer[4]) << 16;
        	    _storedAddr +=  ((DWORD)DDCBuffer[5]) << 8;
        		_storedAddr +=  DDCBuffer[6];
                BYTE ch = 0;
                BYTE *data = NULL;
                WORD  idx = 0;
                BYTE sum = 0;
                for(ch = 0; ch < 3; ch++)
                {
                    for(idx = 0; idx < 320; idx++)
                    {
                        data = (BYTE*)_PA2VA(_storedAddr+(ch*320)+idx);
                        sum ^= (*data) & 0xFF;
                        msSetPostGammaData(ch, idx, (*data) & 0xFF);
                    }
                }
                *_checkSum = sum;
            }
            break;

            case MS_WR_PostGamma :
            {
                BYTE  mode, idx, GammaValue;
                mode = DDCBuffer[3];
                idx = DDCBuffer[4];
                GammaValue = DDCBuffer[5];
                msSavePostGammaTable(mode, idx, GammaValue);
            }
            break;

            case MS_LoadPostGamma :
            {
                //msLoadPostGammaData();
            }
            break;


            #if ENABLE_ColorMode_FUNCTION
            case MS_LoadColorMode :
            {
                BYTE  type = 0,funcIdx = 0;
                type = DDCBuffer[3];
                funcIdx = DDCBuffer[4];

	          switch(type)
                {
                    case  AutoColorFunction_ColorMode :
                        #if ENABLE_ColorMode_FUNCTION
                            switch(funcIdx)
                            {
                                case 0x00:
                                 //sRGB
                                msLoadDeltaEColorMode(0);
                                break;

                                case 0x01:
                                //AdobeRGB
                                msLoadDeltaEColorMode(1);
                                break;

                                case 0x02:
                                //BT709
                                msLoadDeltaEColorMode(2);
                                break;

                                case 0x03:
                                //BT2020
                                msLoadDeltaEColorMode(3);
                                break;

                                case 0x04:
                                //DCIP3
                                msLoadDeltaEColorMode(4);
                                break;
                            }
                            msSetColorEngine(TRUE);
                        #endif
                        break;
                    case  AutoColorFunction_DICOMMode :
                        #if ENABLE_DICOM_FUNCTION
                            //DICOM mode
                            msSetDICOMMode();
                        #endif
                        break;
                    case  AutoColorFunction_GammaCurve :
                        #if ENABLE_GAMMA_FUNCTION
                            //SetGammaCurve Gammaidx
                            msSetGammaCurve(USER_PREF_WIN_SEL, funcIdx);
                        #endif
                        break;
                    case  AutoColorFunction_ColorTemp :
                        #if ENABLE_COLORTEMP_FUNCTION
                            //LoadColorTempMode idx
                            msLoadColorTempMode(funcIdx);
                        #endif
                        break;
                    case  AutoColorFunction_ColorTrack :
                        #if ENABLE_COLORTRACK_FUNCTION
                            //SetColorTrackMode Gammaidx
                            msSetColorTrackMode(USER_PREF_WIN_SEL, funcIdx);
                        #endif
                        break;
                     default :
                        break;
                }
            }
            break;

            #if Enable3DLUTColorMode
                case MS_Set_3DLUT:
                {
                    WORD addr = 0, idx = 0;
                    BYTE sum = 0, cnt = 0, ch = 0;

                    ch = DDCBuffer[3] & 0x03 ;
                    cnt = DDCBuffer[4] ; // data size
                    addr = (WORD)(DDCBuffer[5] << 8 );
                    addr += DDCBuffer[6]; // start addr-hi, lo

                    for(idx = 0; idx < cnt; idx++)
                    {
                        sum ^=  DDCBuffer[7 + idx];
                        msSet3DLUTData(ch, addr + idx, DDCBuffer[7 + idx]);
                    }
                    *_checkSum = sum;
                }
                break;

                case MS_WR_3DLUT:
                {
                    BYTE  mode, idx;
                    mode = DDCBuffer[3];
                    idx = DDCBuffer[4];
                    msSave3DLUTData(mode, idx);
                }
                break;
            #else
                case MS_WR_ColorMatrix :
                {
                    BYTE  cnt, type, idx, sum;
                    type = DDCBuffer[3];
                    cnt = DDCBuffer[4];
                    BYTE CMIdx = DDCBuffer[5];
                    sum = 0;
                    short data = 0;
                    for(idx = 0 ; idx < 9 ; idx++)
                    {
                        data = DDCBuffer[6+ (idx * 2) + 1];
                        data = (data << 8) + DDCBuffer[6+ (idx * 2)];
                        msSetColorMatrixData(idx, data);
                        sum ^=  DDCBuffer[6+ (idx * 2)];
                        sum ^=  DDCBuffer[6+ (idx * 2) + 1];
                    }
                    *_checkSum = sum;
                    msSaveColorMatrixData(type, CMIdx);
                }
                break;
            #endif
            #endif

            #if ENABLE_DICOM_FUNCTION
            case MS_Set_DICOM_Mode :
            {
                msSetDICOMMode();
            }
            break;
            #endif

            #if ENABLE_GAMMA_FUNCTION
            case MS_Set_GammaCurve :
            {
                BYTE idx = DDCBuffer[3];
                msSetGammaCurve(USER_PREF_WIN_SEL ,idx);
            }
            break;
            #endif

            #if ENABLE_COLORTEMP_FUNCTION
            case MS_WR_ColorTemp :
            {
                BYTE  type=0, rGain=0, gGain=0, bGain=0, sum=0;
                type = DDCBuffer[3];
                rGain = DDCBuffer[4];
                gGain = DDCBuffer[5];
                bGain = DDCBuffer[6];
                msSetColorTempData(type, rGain, gGain, bGain);
                sum ^= rGain;
                sum ^= gGain;
                sum ^= bGain;
                *_checkSum = sum;
                msSaveColorTempData(type);
            }
            break;

            case MS_Set_ColorTemp :
            {
                BYTE idx = DDCBuffer[3];
                msLoadColorTempMode(idx);
            }
            break;
            #endif

            #if ENABLE_COLORTRACK_FUNCTION
            case MS_Set_ColorTrackMode :
            {
                BYTE idx = DDCBuffer[3];
                msSetColorTrackMode(USER_PREF_WIN_SEL, idx);
            }
            break;
            #endif
            case MS_IsUse_3DLUT:
            {
                DDCBuffer[0] = 1;
                DDCBuffer[1] = Enable3DLUTColorMode;
                return 1;
            }
            break;
            case MS_GetDeltaEVersion:
            {
                int idx =0, strVerlen = 0;

                strVerlen = sizeof(DeltaEVersion);

                DDCBuffer[0] = strVerlen;
                for( idx = 0 ; idx < strVerlen-1 ; ++idx)
                      DDCBuffer[idx+1] = DeltaEVersion[idx];
                DDCBuffer[strVerlen] = 0x00;
                return strVerlen;
            }
            break;
        #endif
        }
        return 0;

}

BOOL IsAutoColorCommand(BYTE CommandCode)
{
    BYTE idx = 0;
    for (idx = 0; idx < sizeof(AutoColorCommand)/sizeof(BYTE); idx++)
    {
        if (AutoColorCommand[idx] == CommandCode)
            return TRUE;
    }
    return FALSE;
}

short GetCheckSum(BYTE * pData, int size)
{
	short sum = 0;
	int idx = 0;

	for(idx = 0; idx < size; idx++){
		sum ^=	pData[idx];
		//LUT_printData("--%x", pData[idx]);
	}
	return sum;
}

BOOL IsStructEmpty(void * pData, int size)
{
    short idx = 0;
    BYTE* pStruct = pData;
    BOOL bIsAllData_FF = TRUE;
    BOOL bIsAllData_Zero = TRUE;

	for(idx = 0; idx < size; idx++)
    {
	    if (0x00 != pStruct[idx])
        {
            bIsAllData_Zero = FALSE;
        }
        if (0xFF != pStruct[idx])
        {
            bIsAllData_FF = FALSE;
        }

        if(!bIsAllData_Zero && !bIsAllData_FF)
        {
            return FALSE;
        }
	}

    if(bIsAllData_Zero || bIsAllData_FF)
    {
        return TRUE;
    }

    return FALSE;
}
//-------------------------------------------------------------------------------
// Gamma code segment
//-------------------------------------------------------------------------------
void ResetPostGammaData(void)
{
	int idx = 0;
    BYTE **pDefaultGamma = DefaultPostGamma[0];
	for(idx = 0; idx < GammaTableSize; idx++)
	{
		_postGamma.Data[0][idx] = pDefaultGamma[0][idx];
		_postGamma.Data[1][idx] = pDefaultGamma[1][idx];
		_postGamma.Data[2][idx] = pDefaultGamma[2][idx];
	}
	_postGamma.CheckSum = GetCheckSum((BYTE*)(&_postGamma.Data), sizeof(_postGamma.Data));
	LUT_printData("[Reset] CheckSum of Post Gamma : %x", _postGamma.CheckSum);
}

void msSetPostGammaData(int ch, int idx, BYTE data)
{
	if ((ch >= 0 && ch < 3) && (idx >=0 && idx < GammaTableSize)){
		_postGamma.Data[ch][idx] = data;
	}
}


void msSavePostGammaData(WORD addr, BYTE GammaValue)
{
    _postGamma.GammaValue = GammaValue;
	_postGamma.CheckSum = GetCheckSum((BYTE*)(&_postGamma.Data), sizeof(_postGamma.Data));
	NVRam_WriteTbl(addr, (BYTE*)(&_postGamma), sizeof(_postGamma));
}

void msLoadPostGammaData(WORD addr)
{
	WORD size = sizeof(_postGamma);
	BYTE* pData  = (BYTE*)(&_postGamma);
	NVRam_ReadTbl(addr, pData, size);
	short checkSum = GetCheckSum((BYTE*)(&_postGamma.Data), sizeof(_postGamma.Data));
    LUT_printData("msLoadPostGammaData addr = %x", addr);
	LUT_printData("Stored CheckSum of Post Gamma : %x", _postGamma.CheckSum);
	LUT_printData("Calculated CheckSum of Post Gamma : %x", checkSum );

	if ((_postGamma.CheckSum != checkSum) || IsStructEmpty(_postGamma.Data, sizeof(_postGamma.Data)))
	{
		ResetPostGammaData();
		LUT_printMsg("ResetPostGammaData");
 	}
}
void msReadPostGammaData(BYTE u8WinIdx, BYTE u8Color, WORD *pu8GammaTblIdx )
{
        BYTE u8ErrorDetCnt=0, u8TriggerBit=0, u8ScalerIdx=0;
        WORD u16ScalerMask = g_DisplayWindow[u8WinIdx].u16DwScMaskOut;
        DWORD u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

        WORD u16Idx = 0;
        DWORD dataPort = SC10_E2;
        while(u16ScalerMask)
        {
                if(u16ScalerMask & BIT0)
                {
                    u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

                    // From level 0 ~ 1023
                    // set address first
                    msWrite2Byte(u32BaseAddr + SC10_D8, 0x0000);
                    msWrite2Byte(u32BaseAddr + SC10_DA, 0x0000);
                    if(u8ScalerIdx % 2) //Main Window
                    {
                            msWriteByteMask(u32BaseAddr + SC10_DA, _BIT4, 0);
                    }
                    else                         //Sub Window
                    {
                            msWriteByteMask(u32BaseAddr + SC10_DA, _BIT4, _BIT4);
                    }

                    if( u8Color == 0 ) // Red
                    {
                            u8TriggerBit = _BIT5;
                    }
                    else if( u8Color == 1 ) // Green
                    {
                            u8TriggerBit = _BIT6;
                          dataPort = dataPort + 2;
                    }
                    else //if( ucColor == 2 ) // Blue
                    {
                       u8TriggerBit = _BIT7;
                       dataPort = dataPort + 4;
                    }

                    for(u16Idx = 0; u16Idx < 1024; u16Idx++)
                    {
                            msWrite2Byte(u32BaseAddr + SC10_D8, u16Idx);
                            msWriteByte(u32BaseAddr+SC10_DB, u8TriggerBit);
                            while(msReadByte(u32BaseAddr+SC10_DB) & u8TriggerBit)
                            {
                                    Delay1ms(1);
                                    u8ErrorDetCnt++;
                                    if(u8ErrorDetCnt==100)
                                    {
                                            //Check Fail
                                            break;
                                    }
                            }
                            pu8GammaTblIdx[u16Idx] = msRead2Byte(u32BaseAddr + dataPort);
                    }

                    msWrite2Byte(u32BaseAddr + SC10_D8, 0x0000);
                    msWrite2Byte(u32BaseAddr + SC10_DA, 0x0000);
                    break;
                }
                u8ScalerIdx++;
                u16ScalerMask >>= 1;
        }

}


void msReloadGammaData(WORD addr)
{
    //Load PostGamma Table
	msLoadPostGammaData(addr);
	BYTE *StoredPostGamma[][3] =
	{
		{
       		_postGamma.Data[0],
        	_postGamma.Data[1],
        	_postGamma.Data[2],
    	},
	};
	msAPI_GammaLoadTbl_256E_10B(USER_PREF_WIN_SEL,  StoredPostGamma[0]);
}

//-------------------------------------------------------------------------------
// Degamma code segment
//-------------------------------------------------------------------------------
void msCompressGamma(float nativeGma[_channelNum][_maxEntries],
								   unsigned char compressedGma[_channelNum][_comMaxEntries],
								   unsigned char segOft[_segPntNum],
								   unsigned int segPnt[_channelNum][_segPntNum])
{
      /*
      int i = 0 , j = 0;
      for( i = 0 ; i < _channelNum ; ++i)
        for( j = 0 ; j < _maxEntries ; ++j)
            nativeGma[i][j] *= 16 ;
      */
	unsigned char segOftVal[_channelNum][_segPntNum + 1];
	//Step 1, Calculate segement settings to obtain each start address of segement.
	msInitSegSettings(nativeGma, segOft, segOftVal, segPnt);

	//Step2, Transfer native gamma table to sagement format gamma table, each entry is decreased sagement offset.
	//       And then transfer sagement format gamma table to Odin compresssed format gamma table.
	msCompressGammaWithSegValue(nativeGma, compressedGma, segOftVal, segPnt);

}

void msCompressGammaWithSegValue(float nativeGma[_channelNum][_maxEntries],
								 unsigned char compressedGma[_channelNum][_comMaxEntries],
								 unsigned char segOftVal[_channelNum][_segPntNum + 1],
								 unsigned int segPnt[_channelNum][_segPntNum])
{
      int idx = 0,ch=0;
      int comIdx = 0;
	int compressedFmt = 0;
	unsigned char compressedData[4];
	int fmtRef = 0, fmtDelta0 = 0, fmtDelta1 = 0;

	float ref = 0, delta0 = 0, delta1 = 0;
	float p0 = 0, p1 = 0, p2 = 0;
	int currSegOft = 0;
	for (ch = 0; ch < _channelNum; ch++){
        comIdx = 0;
	for (idx = 0; idx < _maxEntries; idx+=8) {
		p0 = nativeGma[ch][idx];
		p1 = nativeGma[ch][idx + 4];
		if (idx < 1016)
			p2 = nativeGma[ch][idx + 8];
		else
			p2 = nativeGma[ch][1023];

		ref = p0;
		delta0 = p1 - p0;
		delta1 = p2 - p1;

		currSegOft = msGetSegOffset(segPnt, segOftVal, ch, idx);

		if (currSegOft > 0) {
			if (delta0 >= currSegOft) {
				delta0 -= currSegOft;
			}else{
				delta0 = 0;
			}

			if (delta1 >= currSegOft) {
				delta1 -= currSegOft;
			}else{
				delta1 = 0;
			}
		}

		if (delta0 >= (_maxDelta - 1))
			delta0 = _maxDelta - 1;

		if (delta1 > (_maxDelta - 1))
			delta1 = _maxDelta - 1;

		fmtRef = (int)(ref);
		fmtDelta0 = (int)(delta0);
		fmtDelta1 = (int)(delta1);
		compressedFmt = fmtDelta1 + (fmtDelta0 << 5) + (fmtRef << 10);

		if (idx < 1024) {
			compressedData[0] = compressedFmt & 0xFF;
			compressedData[1] = (compressedFmt >> 8) & 0xFF;
			compressedData[2] = (compressedFmt >> 16) & 0xFF;
			compressedData[3] = (compressedFmt >> 24) & 0xFF;
		}else{
			compressedData[0] = compressedData[1] = compressedData[2] = compressedData[3] = 0;
		}

		compressedGma[ch][comIdx + 0] = compressedData[2];
		compressedGma[ch][comIdx + 1] = compressedData[0];
		compressedGma[ch][comIdx + 2] = compressedData[1];
		comIdx+=3;

	}
	}
}

void msInitSegSettings(float nativeGma[_channelNum][_maxEntries],
									 unsigned char segOft[_segPntNum],
									 unsigned char segOftVal[_channelNum][_segPntNum + 1],
									 unsigned int segPnt[_channelNum][_segPntNum])
{
       int seg = 0,ch=0,idx=0;
	float ref = 0, lastRef = 0, delta = 0;
	//Default settings is no sageement setting.
	for (seg = 0; seg < _segPntNum; seg++)
	for (ch = 0; ch < _channelNum; ch++)
		segPnt[ch][seg] = 0x3FF;

	segOft[0] = segOft[1] = segOft[2] = 0x00;

	int segCnt = 0;
	float deltaLimit = 0;
	bool IsFstPnt = false;
	bool GmaOne = false;  //gamma curve >= 1
	bool CanSetPnt = false;
	int segSet = 0;

	//Find max delta for estimate the limitation.
	int maxDelta[_channelNum];
	unsigned char point[_channelNum];
	msFindMaxDelta(nativeGma, maxDelta, point);

	for (ch = 0; ch < _channelNum; ch++) {
		//reset reg & lastRef as first data.
		lastRef = nativeGma[ch][0];
		segCnt = 0;
		IsFstPnt = true;
		GmaOne = false;
		for (idx = 4; idx < _maxEntries; idx+=4) {
			ref = nativeGma[ch][idx];
			delta = ref - lastRef;
			if (IsFstPnt) {
				IsFstPnt = false;
				if (delta > _maxDelta * 3) {
					segOftVal[ch][0] = _maxDelta * 3;
					segOftVal[ch][1] = _maxDelta * 2;
					segOftVal[ch][2] = _maxDelta * 1;
					segOftVal[ch][3] = _maxDelta * 0;
				}else if (delta > _maxDelta * 2) {
					segOftVal[ch][0] = _maxDelta * 2;
					segOftVal[ch][1] = _maxDelta * 1;
					segOftVal[ch][2] = _maxDelta * 0;
					segOftVal[ch][3] = _maxDelta * 0;
				}else if (delta > _maxDelta * 1) {
					segOftVal[ch][0] = _maxDelta * 1;
					segOftVal[ch][1] = _maxDelta * 0;
					segOftVal[ch][2] = _maxDelta * 0;
					segOftVal[ch][3] = _maxDelta * 0;
				}else if (delta >= _maxDelta * 0) {
					segOftVal[ch][0] = _maxDelta * 0;
					segOftVal[ch][1] = _maxDelta * 1;
					segOftVal[ch][2] = _maxDelta * 2;
					segOftVal[ch][3] = _maxDelta * 3;
					GmaOne = true;
				}

				segSet = 0;
				for (seg = 0; seg <= _segPntNum; seg++) {
					segSet |= (segOftVal[ch][seg] / _maxDelta) << (seg * 2);
				}
				segOft[ch] = segSet;
			}

			if (GmaOne)
				deltaLimit = segOftVal[ch][segCnt + 1];
			else
				deltaLimit = segOftVal[ch][segCnt];

			if (GmaOne && delta >= deltaLimit){
				CanSetPnt = true;
			}

			if (!GmaOne && delta < deltaLimit){
				CanSetPnt = true;
			}

			if (CanSetPnt) {
				CanSetPnt = false;
				segPnt[ch][segCnt] = ((idx) / 4);
				//segPnt[ch][segCnt]--;
				segCnt++;
				if (segCnt == 3) {
					break;
				}
			}
			lastRef = ref;
		}
	}
}

int msGetSegOffset(unsigned int segPnt[_channelNum][_segPntNum],
								 unsigned char segOftVal[_channelNum][_segPntNum + 1],
								 int ch,
								 int entry)
{
	int startEntry = 0;
	int EndEntry = 0;
	int segCnt = 0;
	for (segCnt = 0; segCnt < 3; segCnt++) {
		EndEntry = segPnt[ch][segCnt] * 4;
		if (entry >= startEntry && entry < EndEntry) {
			return segOftVal[ch][segCnt];
		}
		startEntry = EndEntry;
	}

	if (entry > EndEntry) {
		return segOftVal[ch][segCnt];
	}
	return 0;
}

void msFindMaxDelta(float nativeGma[_channelNum][_maxEntries], int maxDelta[_channelNum], unsigned char point[_channelNum])
{
	int currDelta = 0,ch=0,idx=0;
	for (ch = 0; ch < _channelNum; ch++) {
		maxDelta[ch] = 0;
		currDelta = 0;
		for (idx = 4; idx < _maxEntries; idx+=4) {
			currDelta = nativeGma[ch][idx] - nativeGma[ch][idx - 4];
			if (maxDelta[ch] < currDelta) {
				maxDelta[ch] = currDelta;
				point[ch] = idx - 4;
			}
		}
	}
}

//-------------------------------------------------------------------------------
// Set test pattern
//-------------------------------------------------------------------------------
extern void msSetTestPattern(BOOL IsOn, BYTE R, BYTE G, BYTE B)
{
	short horSt, horEd;
	if (IsOn)
	{
	    msWriteByte(0x102F00, 0x10);
	    horSt = msRead2Byte(0x102F10);
	    horEd= msRead2Byte(0x102F12);
	    if (horSt != 0 || horEd !=0)
	    {
	        _L0HSt = horSt;
		 _L0HEd = horEd;
		 msWrite2Byte(0x102F10, 0x00);
   	        msWrite2Byte(0x102F12, 0x00);
	    }
	    msWriteByte(0x102F33, R);
           msWriteByte(0x102F34, G);
	    msWriteByte(0x102F35, B);

	    msWriteByte(0x102B00, 0x10);
	    horSt = msRead2Byte(0x102B10);
	    horEd= msRead2Byte(0x102B12);
	    if (horSt != 0 || horEd !=0)
	    {
	        _R0HSt = horSt;
		 _R0HEd = horEd;
		 msWrite2Byte(0x102B10, 0x00);
   	        msWrite2Byte(0x102B12, 0x00);
	    }
	    msWriteByte(0x102B33, R);
           msWriteByte(0x102B34, G);
	    msWriteByte(0x102B35, B);
	}
	else
	{
           if (_L0HSt != 0 || _L0HEd != 0)
	    {
	        msWriteByte(0x102F00, 0x10);
	        msWrite2Byte(0x102F10, _L0HSt);
   	        msWrite2Byte(0x102F12, _L0HEd);
           }

	    if (_R0HSt != 0 || _R0HEd != 0)
           {
	        msWriteByte(0x102B00, 0x10);
	        msWrite2Byte(0x102B10, _R0HSt);
   	        msWrite2Byte(0x102B12, _R0HEd);
	    }
	}
}

//-------------------------------------------------------------------------------
// Set Color Engine test pattern
//
void msSetColorEngineTestPattern(BYTE u8WinIdx, Bool bEnable, WORD u16Red, WORD u16Green, WORD u16Blue)
{
    BYTE u8ScalerIdx = 0;
    WORD u16ScalerMask = g_DisplayWindow[u8WinIdx].u16DwScMaskOut;
    DWORD u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

    while(u16ScalerMask)
    {
        if(u16ScalerMask & BIT0)
        {
            u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

            msWriteByte(u32BaseAddr + SC14_03, (bEnable ? BIT0: 0));
            msWriteByteMask(u32BaseAddr + SC25_60, (bEnable ? BIT0: 0), BIT0);
            msWriteByteMask(u32BaseAddr + SC25_62, (bEnable ? BIT0: 0), BIT0);
            msWrite2Byte(u32BaseAddr + SC25_64, u16Red);
            msWrite2Byte(u32BaseAddr + SC25_66, u16Green);
            msWrite2Byte(u32BaseAddr + SC25_68, u16Blue);

        }
        u8ScalerIdx++;
        u16ScalerMask >>= 1;
    }
}


//-------------------------------------------------------------------------------
// Toggle color engine
//-------------------------------------------------------------------------------
void msByPassColorEngine(BYTE u8WinIdx, BOOL bEnable)
{
    BYTE u8ScalerIdx = 0;
    WORD u16ScalerMask = g_DisplayWindow[u8WinIdx].u16DwScMaskOut;
    DWORD u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

    while(u16ScalerMask)
    {
        if(u16ScalerMask & BIT0)
        {
            u32BaseAddr = g_ScalerInfo[u8ScalerIdx].u32SiRegBase;

            if(bEnable)
            {
                if(u8ScalerIdx %2)
                    msWriteBit(u32BaseAddr+SC27_E0, TRUE, _BIT0);

            }
            else
            {
                if(u8ScalerIdx %2)
                    msWriteBit(u32BaseAddr+SC27_E0, FALSE, _BIT0);

            }
        }
        u8ScalerIdx++;
        u16ScalerMask >>= 1;
    }
}

void msSetColorEngine(BOOL IsOn)
{
    //msByPassColorEngine(USER_PREF_WIN_SEL, IsOn);
	msAPI_GammaEnable(USER_PREF_WIN_SEL, IsOn);

    #if Enable3DLUTColorMode
        ms3DLutGrayGuard(USER_PREF_WIN_SEL, IsOn);
        ms3DLutEnable(USER_PREF_WIN_SEL, IsOn);
    #else
        msAPI_DeGammaEnable(USER_PREF_WIN_SEL, IsOn);
	    msAPI_FixGammaEnable(USER_PREF_WIN_SEL, IsOn);
	    msAPI_ColorMatrixEnable(USER_PREF_WIN_SEL, IsOn, 0);
    #endif
}

//-------------------------------------------------------------------------------
// Table Address on EPPROM
//      Color Mode
//      ------------------------------------
//      |Gamma x NUM_OF_COLORMODE_GAMMA
//      |Gamma 2.2(Panel native) x 1
//      |Gamma 2.4(Panel native) x 1
//      |Gamma 2.6(Panel native) x 1
//      |          ...
//      ------------------------------------ Traditional color matrix calibration mode
//      |Color Matrix x NUM_OF_COLORMODE_MATRIX
//      |SRGB, AdobeRGB Color Matrix x 2
//      |BT709, BT2020 Color Matrix x 2
//      |DCIP Color Matrix x 1
//      |          ...
//      ------------------------------------ 3D LUT calibration mode
//      |3DLUT x NUM_OF_COLORMODE
//      |SRGB, AdobeRGB 3DLUTx 2
//      |BT709, BT2020 3DLUT x 2
//      |DCIP 3DLUT x 1
//      |          ...
//      ------------------------------------
//      DICOM
//      ------------------------------------
//      |Gamma 4.8 x 1
//      ------------------------------------
//      Gamma curve
//      ------------------------------------
//      |Gamma 2.2(Panel native) x 1
//      ------------------------------------
//      Color temp
//      ------------------------------------
//      |Gamma (Fix target) x 1
//      |RGB gain x NUM_OF_COLOR_TEMP
//      ------------------------------------
//      Color track mode
//      ------------------------------------
//      |Gamma x NUM_OF_COLORTRACK_GAMMA
//      ------------------------------------
//-------------------------------------------------------------------------------
void SetAddrOfStoredTable(int addr)
{
	_addrOfAutoColorBlock = addr;
}

//-------------------------------------------------------------------------------
// Access Color Matrix
//-------------------------------------------------------------------------------
#if ENABLE_ColorMode_FUNCTION
WORD GetAddrOfColorModePostGamma(BYTE idx)
{
	return _addrOfAutoColorBlock + sizeof(StoredFormatOfPostGamma)*idx;
}

#if Enable3DLUTColorMode
StoredFormatOf3DLUT _3DLUT;
WORD GetAddrOfColorMode3DLUT(BYTE idx)
{
    return _addrOfAutoColorBlock + sizeof(StoredFormatOfPostGamma)*NUM_OF_COLORMODE_GAMMA + sizeof(StoredFormatOf3DLUT)*idx;
}

void Reset3DLUTData(void)
{
	BYTE R=0, G=0, B=0;

    for (B=0; B<5; B++)
    {
        for (G=0; G<5; G++)
        {
            for (R=0; R<5; R++)
            {

                _3DLUT.Data[0][B*25+G*5+R] = (((4-R)*64)>255)?255:((4-R)*64);
                _3DLUT.Data[1][B*25+G*5+R] = (((4-G)*64)>255)?255:((4-G)*64);
                _3DLUT.Data[2][B*25+G*5+R] = (((4-B)*64)>255)?255:((4-B)*64);
            }
        }
    }
	_3DLUT.CheckSum = GetCheckSum((BYTE*)(&_3DLUT.Data), sizeof(_3DLUT.Data));
	LUT_printData("[Reset] CheckSum of 3DLUT : %x", _3DLUT.CheckSum);

}

void msSet3DLUTData(int ch, int idx, BYTE data)
{
	if ((ch >= 0 && ch < 3) && (idx >=0 && idx < _3DLUTTableSize)){
		_3DLUT.Data[ch][idx] = data;
	}
}

void msSave3DLUTData(BYTE ucColorMode, BYTE idx)
{
    if (idx >= NUM_OF_COLORMODE)
        return;

	WORD addr = GetAddrOfColorMode3DLUT(idx);
    _3DLUT.ColorMode = ucColorMode;
	_3DLUT.CheckSum = GetCheckSum((BYTE*)(&_3DLUT.Data), sizeof(_3DLUT.Data));
	NVRam_WriteTbl(addr, (BYTE*)(&_3DLUT), sizeof(_3DLUT));
}

void msLoad3DLUTData(BYTE ucColorMode)
{
    LUT_printMsg("msLoad3DLUTData......");
    LUT_printData("msLoad3DLUTData ucColorMode : %X", ucColorMode);
    BYTE idx = 0;
    WORD addr = 0;
    BYTE colorMode = 0;
    short checkSum = 0;
    for (idx = 0; idx < NUM_OF_COLORMODE; idx++)
    {
        addr = GetAddrOfColorMode3DLUT(idx);
        NVRam_ReadByte(addr, &colorMode);
        if (colorMode == ucColorMode)
        {
            LUT_printData("Addr of _3DLUT : %X", addr);
            NVRam_ReadTbl(addr, (BYTE*)(&_3DLUT), sizeof(_3DLUT));
        	checkSum = GetCheckSum((BYTE*)(&_3DLUT.Data), sizeof(_3DLUT.Data));

        	LUT_printData("ColorMode : %d", _3DLUT.ColorMode);
        	LUT_printData("Stored CheckSum of 3DLUT : %x", _3DLUT.CheckSum);
        	LUT_printData("Calculated CheckSum of 3DLUT : %x", checkSum);
            break;
        }
    }
	if ((_3DLUT.CheckSum != checkSum) || (idx == NUM_OF_COLORMODE) || IsStructEmpty(_3DLUT.Data, sizeof(_3DLUT.Data)))
	{
		Reset3DLUTData();
		LUT_printMsg("Reset3DLUTData...");
	}
}

void msLoadDeltaEColorMode(BYTE ucColorMode)
{
    int idx = 0;
	msSetColorEngine(FALSE);

	//Load 3DLUT table
	msLoad3DLUTData(ucColorMode);
    drv3DLut_WriteCompressedLUT(USER_PREF_WIN_SEL, &_3DLUT.Data[0][0]);
    ms3DLutGrayGuard(0, TRUE);

    BYTE GammaMap[DELTAE_NUM_OF_COLORMODE] = {22, 22, 24, 24, 26};
    WORD addr = 0;
    BYTE GammaValue = 0;
    for (idx = 0; idx < NUM_OF_COLORMODE_GAMMA; idx++)
    {
        addr = GetAddrOfColorModePostGamma(idx);
        NVRam_ReadByte(addr, &GammaValue);
        if (GammaMap[ucColorMode] == GammaValue)
        {
            msReloadGammaData(addr);
            break;
        }
    }
    if (NUM_OF_COLORMODE_GAMMA == idx)
    {
       ResetPostGammaData();
       BYTE *StoredPostGamma[][3] =
       {
    		{
           		_postGamma.Data[0],
            	_postGamma.Data[1],
            	_postGamma.Data[2],
        	},
       };
       msAPI_GammaLoadTbl_256E_10B(USER_PREF_WIN_SEL,  StoredPostGamma[0]);
    }
}

#else
StoredFormatOfColorMatirx _colorMatrix;
WORD GetAddrOfColorModeMatrix(BYTE idx)
{
    return _addrOfAutoColorBlock + sizeof(StoredFormatOfPostGamma)*NUM_OF_COLORMODE_GAMMA + sizeof(StoredFormatOfColorMatirx)*idx;
}

void ResetColorMatrixData(void)
{
	int idx = 0;
	for (idx = 0; idx < 9; idx++)
		_colorMatrix.Data[idx] = 0;

	_colorMatrix.Data[0] = 0x400;
	_colorMatrix.Data[4] = 0x400;
	_colorMatrix.Data[8] = 0x400;

	_colorMatrix.CheckSum = GetCheckSum((BYTE*)(&_colorMatrix.Data), sizeof(_colorMatrix.Data));
	LUT_printData("[Reset] CheckSum of Color Matrix : %x", _colorMatrix.CheckSum);

}

void msSetColorMatrixData(int idx, short data)
{
	if (idx >= 0 && idx < 9)
		_colorMatrix.Data[idx] = data;
}

void msSaveColorMatrixData(BYTE ucColorMode, BYTE idx)
{
    if (idx >= NUM_OF_COLORMODE)
        return;
	WORD addr = GetAddrOfColorModeMatrix(idx);
    _colorMatrix.ColorMode = ucColorMode;
	_colorMatrix.CheckSum = GetCheckSum((BYTE*)(&_colorMatrix.Data), sizeof(_colorMatrix.Data));
	NVRam_WriteTbl(addr, (BYTE*)(&_colorMatrix), sizeof(_colorMatrix));
}

void msLoadColorMatrixData(BYTE ucColorMode)
{
    LUT_printMsg("msLoadColorMatrixData......");
    LUT_printData("msLoadColorMatrixData ucColorMode : %X", ucColorMode);
    BYTE idx = 0;
    WORD addr = 0;
    BYTE colorMode = 0;
    short checkSum = 0;
    for (idx = 0; idx < NUM_OF_COLORMODE; idx++)
    {
        addr = GetAddrOfColorModeMatrix(idx);
        NVRam_ReadByte(addr, &colorMode);
        if (colorMode == ucColorMode)
        {
            LUT_printData("Addr of _colorMatrix : %X", addr);
            NVRam_ReadTbl(addr, (BYTE*)(&_colorMatrix), sizeof(_colorMatrix));
        	checkSum = GetCheckSum((BYTE*)(&_colorMatrix.Data), sizeof(_colorMatrix.Data));

        	LUT_printData("ColorMode : %d", _colorMatrix.ColorMode);
        	LUT_printData("Stored CheckSum of Color Matrix : %x", _colorMatrix.CheckSum);
        	LUT_printData("Calculated CheckSum of Color Matrix : %x", checkSum);
            break;
        }
    }
	if ((_colorMatrix.CheckSum != checkSum) || (idx == NUM_OF_COLORMODE) || IsStructEmpty(_colorMatrix.Data, sizeof(_colorMatrix.Data)))
	{
		ResetColorMatrixData();
		LUT_printMsg("ResetColorMatrixData...");
	}
}
void msLoadDeltaEColorMode(BYTE ucColorMode)
{
	int idx = 0;
	short val = 0;
	msSetColorEngine(FALSE);

	//Load ColorMatrix table
	msLoadColorMatrixData(ucColorMode);
	short* psMatrix = &_colorMatrix.Data[0];
	//s2.10 format transfer to short data format;
	for (idx = 0; idx < 9; idx++)
	{
		val = psMatrix[idx];
		//LUT_printData("val -before %d", val);
		if ((val & _BIT12) == _BIT12)
		{
			val &= 0xFFF;
			val = 0x1000 - val;
			val *= -1;
		}
		psMatrix[idx] = val;
		//LUT_printData("val -after %d", val);
	}

	msWritexvYccColorMatrix(USER_PREF_WIN_SEL, psMatrix);

    BYTE GammaMap[DELTAE_NUM_OF_COLORMODE] = {22, 22, 24, 24, 26};
    WORD addr = 0;
    BYTE GammaValue = 0;
    for (idx = 0; idx < NUM_OF_COLORMODE_GAMMA; idx++)
    {
        addr = GetAddrOfColorModePostGamma(idx);
        NVRam_ReadByte(addr, &GammaValue);
        if (GammaMap[ucColorMode] == GammaValue)
        {
            msReloadGammaData(addr);
            break;
        }
    }
    if (NUM_OF_COLORMODE_GAMMA == idx)
    {
       ResetPostGammaData();
       BYTE *StoredPostGamma[][3] =
       {
    		{
           		_postGamma.Data[0],
            	_postGamma.Data[1],
            	_postGamma.Data[2],
        	},
       };
       msAPI_GammaLoadTbl_256E_10B(USER_PREF_WIN_SEL,  StoredPostGamma[0]);
    }

	//Load DeGamma Table
#if (CHIP_ID==MST9U3)
    //degamma : hardware compress format
    BYTE *pDeGammaTab = tblDeGamma22_C;
    if (DELTAE_COLORMODE_SRGB == ucColorMode || DELTAE_COLORMODE_ADOBERGB == ucColorMode)
    {
        pDeGammaTab = tblDeGamma22_C;
    }
    else if (DELTAE_COLORMODE_BT709 == ucColorMode || DELTAE_COLORMODE_BT2020 == ucColorMode)
    {
        pDeGammaTab = tblDeGamma24_C;
    }
    else if (DELTAE_COLORMODE_DCIP == ucColorMode)
    {
        pDeGammaTab = tblDeGamma26_C;
    }

    BYTE *DefaultDeGammaTab[][3] =
    {
        {pDeGammaTab,  pDeGammaTab,  pDeGammaTab,},
    };
	msAPI_DeGammaLoadTbl(USER_PREF_WIN_SEL, DefaultDeGammaTab[0]);
#else
    BYTE *pDeGammaTab = tblDeGamma22;
    BYTE *pSegGain = SegGainOfDeGamma22;
    WORD *pSegPoint = SegPointOfDeGamma22;
    if (DELTAE_COLORMODE_SRGB == ucColorMode || DELTAE_COLORMODE_ADOBERGB == ucColorMode)
    {
        pDeGammaTab = tblDeGamma22;
        pSegGain = SegGainOfDeGamma22;
        pSegPoint = SegPointOfDeGamma22;
    }
    else if (DELTAE_COLORMODE_BT709 == ucColorMode || DELTAE_COLORMODE_BT2020 == ucColorMode)
    {
        pDeGammaTab = tblDeGamma24;
        pSegGain = SegGainOfDeGamma24;
        pSegPoint = SegPointOfDeGamma24;
    }
    else if (DELTAE_COLORMODE_DCIP == ucColorMode)
    {
        pDeGammaTab = tblDeGamma26;
        pSegGain = SegGainOfDeGamma26;
        pSegPoint = SegPointOfDeGamma26;
    }

    BYTE *DefaultDeGammaTab[][4] =
    {
        {pDeGammaTab, pDeGammaTab, pDeGammaTab, pSegGain, },
    };
    WORD *DefaultSegPointTbl[][1] =
    {
        {pSegPoint},
    };
	msAPI_DeGammaLoadTbl_Compressed(USER_PREF_WIN_SEL, DefaultDeGammaTab[0], DefaultSegPointTbl[0]);
#endif

	//Load FixGamma Table
    //fixgamma : 256 entry - 12 bits
    BYTE *pFixGammaTab = tblFixGamma22_N;
    if (DELTAE_COLORMODE_SRGB == ucColorMode || DELTAE_COLORMODE_ADOBERGB == ucColorMode)
    {
        pFixGammaTab = tblFixGamma22_N;
    }
    else if (DELTAE_COLORMODE_BT709 == ucColorMode || DELTAE_COLORMODE_BT2020 == ucColorMode)
    {
        pFixGammaTab = tblFixGamma24_N;
    }
    else if (DELTAE_COLORMODE_DCIP == ucColorMode)
    {
        pFixGammaTab = tblFixGamma26_N;
    }

    BYTE *DefaultFixGammaTab[][3]=
    {
        {pFixGammaTab,  pFixGammaTab,  pFixGammaTab,},
    };
	msAPI_FixGammaLoadTbl_256E_12B(USER_PREF_WIN_SEL, DefaultFixGammaTab[0]);

	//msSetColorEngine(TRUE);

}
#endif
#endif

//-------------------------------------------------------------------------------
// DICOM
//-------------------------------------------------------------------------------
#if ENABLE_DICOM_FUNCTION
WORD GetAddrOfDICOM(void)
{
    return _addrOfAutoColorBlock + sizeOfColorModeBlock;
}

void msSetDICOMMode(void)
{
    //msPQ_BypassPQ(USER_PREF_WIN_SEL, true);
    //Load PostGamma Table
    msReloadGammaData(GetAddrOfDICOM());
    msAPI_GammaEnable(USER_PREF_WIN_SEL, true);
}
#endif

//-------------------------------------------------------------------------------
// Gamma curve
//-------------------------------------------------------------------------------
#if ENABLE_GAMMA_FUNCTION
WORD GetAddrOfPostGamma(void)
{
	return _addrOfAutoColorBlock + sizeOfColorModeBlock + sizeOfDICOMBlock;
}

void msSetGammaCurve(BYTE u8DispWin, BYTE GammaIndex)
{
    msAPI_GammaEnable(u8DispWin, _DISABLE);
    msAPI_FixGammaEnable(u8DispWin, _DISABLE);

    msReloadGammaData(GetAddrOfPostGamma());
    msAPI_FixGammaLoadTbl_256E_12B(u8DispWin, tAllAdjustGammaFixGammaTab[GammaIndex]);

    msAPI_GammaEnable(u8DispWin, _ENABLE);
    msAPI_FixGammaEnable(u8DispWin, _ENABLE);
}
#endif

//-------------------------------------------------------------------------------
// Access Color Temp
//-------------------------------------------------------------------------------
#if ENABLE_COLORTEMP_FUNCTION
WORD GetAddrOfColorTempPostGamma(void)
{
	return _addrOfAutoColorBlock + sizeOfColorModeBlock + sizeOfDICOMBlock + sizeOfGammaBlock;
}
WORD GetAddrOfColorTempRGBGain(BYTE idx)
{
    return _addrOfAutoColorBlock + sizeOfColorModeBlock + sizeOfDICOMBlock + sizeOfGammaBlock + sizeof(StoredFormatOfPostGamma) + sizeof(StoredFormatOfColorTemp)*idx;
}

void msSetColorTempData(int idx, WORD u16Red, WORD u16Green, WORD u16Blue)
{
    if (idx >= 0 && idx < NUM_OF_COLOR_TEMP)
    {
       _colorTemp.rgbCont[0] = u16Red;
       _colorTemp.rgbCont[1] = u16Green;
       _colorTemp.rgbCont[2] = u16Blue;
    }
}
void msSaveColorTempData(int idx)
{
    if (idx >= NUM_OF_COLOR_TEMP)
        return;
    WORD addr = GetAddrOfColorTempRGBGain(idx);
	_colorTemp.CheckSum = GetCheckSum((BYTE*)(&_colorTemp.rgbCont), sizeof(_colorTemp.rgbCont));
	NVRam_WriteTbl(addr, (BYTE*)(&_colorTemp), sizeof(_colorTemp));
}

void msLoadColorTempMode(BYTE idx)
{
    //msPQ_BypassPQ(USER_PREF_WIN_SEL, true);
	WORD addr = GetAddrOfColorTempRGBGain(idx);
    LUT_printData("addr of _colorTemp : %X", addr);
	NVRam_ReadTbl(addr, (BYTE*)(&_colorTemp), sizeof(_colorTemp));
	short checkSum = GetCheckSum((BYTE*)(&_colorTemp.rgbCont), sizeof(_colorTemp.rgbCont));

	LUT_printData("Stored CheckSum of Color Temp : %x", _colorTemp.CheckSum);
	LUT_printData("Calculated CheckSum of Color Temp : %x", checkSum);

	if ((_colorTemp.CheckSum != checkSum) || IsStructEmpty(&_colorTemp.rgbCont, sizeof(_colorTemp.rgbCont)))
	{
		LUT_printMsg("CheckSum of Color Temp ERROR");
	}
    else
    {
        msUsePostContrast(USER_PREF_WIN_SEL, true);
        msAPI_AdjustRGBColor(USER_PREF_WIN_SEL, _colorTemp.rgbCont[0], _colorTemp.rgbCont[1], _colorTemp.rgbCont[2]);

        msReloadGammaData(GetAddrOfColorTempPostGamma());
        msAPI_GammaEnable(USER_PREF_WIN_SEL, true);
    }
}
#endif

//-------------------------------------------------------------------------------
// Color track mode
//-------------------------------------------------------------------------------
#if ENABLE_COLORTRACK_FUNCTION
WORD GetAddrOfColorTrackPostGamma(BYTE idx)
{
	return _addrOfAutoColorBlock + sizeOfColorModeBlock + sizeOfDICOMBlock + sizeOfGammaBlock + sizeOfColorTempBlock + sizeof(StoredFormatOfPostGamma)*idx;
}

void msSetColorTrackMode(BYTE u8DispWin, BYTE GammaIndex)
{
    //msPQ_BypassPQ(USER_PREF_WIN_SEL, true);
    msReloadGammaData(GetAddrOfColorTrackPostGamma(GammaIndex));
    msAPI_GammaEnable(u8DispWin, true);
}
#endif

void  msSavePostGammaTable(BYTE mode, BYTE idx, BYTE GammaValue)
{
    switch(mode)
    {
        #if ENABLE_ColorMode_FUNCTION
        case AutoColorFunction_ColorMode :
        {
            if (idx >= NUM_OF_COLORMODE_GAMMA)
                return;
            msSavePostGammaData(GetAddrOfColorModePostGamma(idx), GammaValue);
        }
        break;
        #endif
        #if ENABLE_DICOM_FUNCTION
        case AutoColorFunction_DICOMMode :
        {
            msSavePostGammaData(GetAddrOfDICOM(), GammaValue);
        }
        break;
        #endif
        #if ENABLE_GAMMA_FUNCTION
        case AutoColorFunction_GammaCurve :
        {
            msSavePostGammaData(GetAddrOfPostGamma(), GammaValue);
        }
        break;
        #endif
        #if ENABLE_COLORTEMP_FUNCTION
        case AutoColorFunction_ColorTemp:
        {
            msSavePostGammaData(GetAddrOfColorTempPostGamma(), GammaValue);
        }
        break;
        #endif
        #if ENABLE_COLORTRACK_FUNCTION
        case AutoColorFunction_ColorTrack :
        {
            if (idx >= NUM_OF_COLORTRACK_GAMMA)
                return;
            msSavePostGammaData(GetAddrOfColorTrackPostGamma(idx), GammaValue);
        }
        break;
        #endif

    }
}

void msResetWholeColorCalibrationData()
{
    BYTE idx = 0;
    ResetPostGammaData();

#if ENABLE_ColorMode_FUNCTION
    for (idx = 0; idx < NUM_OF_COLORMODE_GAMMA; idx++)
    {
        msSavePostGammaData(GetAddrOfColorModePostGamma(idx), 22);
    }
#if Enable3DLUTColorMode
    Reset3DLUTData();
    for (idx = 0; idx < NUM_OF_COLORMODE; idx++)
    {
        msSave3DLUTData(idx, idx);
    }
#else
    ResetColorMatrixData();
    for (idx = 0; idx < NUM_OF_COLORMODE; idx++)
    {
        msSaveColorMatrixData(idx, idx);
    }
#endif
#endif

#if ENABLE_DICOM_FUNCTION
    msSavePostGammaData(GetAddrOfDICOM(), 22);
#endif


#if ENABLE_GAMMA_FUNCTION
    msSavePostGammaData(GetAddrOfPostGamma(), 22);
#endif


#if ENABLE_COLORTEMP_FUNCTION
    msSavePostGammaData(GetAddrOfColorTempPostGamma(), 22);
    msSetColorTempData(0, 0xFF, 0xFF, 0xFF);
    for (idx = 0; idx < NUM_OF_COLOR_TEMP; idx++)
    {
        msSaveColorTempData(idx);
    }
#endif


#if ENABLE_COLORTRACK_FUNCTION
    for (idx = 0; idx < NUM_OF_COLORTRACK_GAMMA; idx++)
    {
        msSavePostGammaData(GetAddrOfColorTrackPostGamma(idx), 22);
    }
#endif
}


